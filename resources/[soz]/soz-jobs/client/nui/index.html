<!DOCTYPE html>
<!-- NUI USED FOR soz-jobs -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }
        #wrapper {
            width: 100vw;
            height: 100vh;
            position: relative;
        }
        #icons {
            position: absolute;
            bottom: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            font-size: 2rem;
        }
        #icons svg {
            width: 2rem;
            height: 2rem;
            margin: 0 .25rem;
        }
    </style>
</head>
<body>
    <section id="wrapper" style="display: none;">
        <div id="icons"></div>
    </section>

    <script type="text/javascript">
        const ICON_TYPE = {
            cardinal: getGrapeIcon,
            muscat: getGrapeIcon,
            chasselas: getGrapeIcon,
            centennial: getGrapeIcon,
            petrol: getDrumIcon,
            pumpkin: getPumpkinIcon,
        }

        const COLORSETS = {
            cardinal: ["#553788", "#9266CC", "#AA8DD8", "#744EAA"],
            muscat: ["#CFCB91", "#C4B991", "#CBCCA9", "#D1C8A1"],
            chasselas: ["#91873A", "#CCBE56", "#D9D06F", "#AB9D4F"],
            centennial: ["#708736", "#B1CC66", "#C1D98D", "#95AB4F"],
            petrol: ["#3B88C3", "#269", "#99AAB5"],
        };

        function setVisible(newValue) {
            const el = document.querySelector("#wrapper");
            el.style.display = newValue ? "block" : "none";
        }

        function getGrapeIcon(colors) {
            // Source : https://github.com/twitter/twemoji/blob/master/assets/svg/1f347.svg
            return `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
                    <path fill="#77B255" d="M9.999 12c-.15 0-.303-.034-.446-.106-4.38-2.19-7.484-7.526-8.501-10.578C.876.792 1.16.226 1.684.051c.525-.176 1.091.109 1.265.632.877 2.632 3.688 7.517 7.499 9.422.494.247.694.848.447 1.342-.176.351-.529.553-.896.553z"/>
                    <circle fill="${colors[0]}" cx="19" cy="29" r="7"/>
                    <circle fill="${colors[1]}" cx="10" cy="15" r="7"/>
                    <circle fill="${colors[2]}" cx="19" cy="12" r="7"/>
                    <circle fill="${colors[3]}" cx="27" cy="18" r="7"/>
                    <circle fill="${colors[3]}" cx="9" cy="26" r="7"/>
                    <circle fill="${colors[1]}" cx="18" cy="21" r="7"/>
                    <circle fill="${colors[1]}" cx="29" cy="29" r="7"/>
                </svg>`;
        }

        function getDrumIcon(colors) {
            // Source : https://github.com/twitter/twemoji/blob/master/assets/svg/1f6e2.svg
            return `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
                    <path fill="${colors[0]}" d="M7 25h22v9H7zm0-11h22v9H7zM7 3h22v10H7z"/>
                    <path fill="${colors[1]}" d="M30 3.178c0 .454-.368.822-.822.822H6.822C6.368 4 6 3.632 6 3.178v-.356C6 2.368 6.368 2 6.822 2h22.355c.455 0 .823.368.823.822v.356zm0 11c0 .454-.368.822-.822.822H6.822C6.368 15 6 14.632 6 14.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356zm0 10c0 .454-.368.822-.822.822H6.822C6.368 25 6 24.632 6 24.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356zm0 11c0 .454-.368.822-.822.822H6.822C6.368 36 6 35.632 6 35.178v-.355c0-.455.368-.823.822-.823h22.355c.455 0 .823.368.823.822v.356z"/>
                    <path fill="${colors[2]}" d="M26 1.128c0 .481-.391.872-.872.872h-2.256C22.391 2 22 1.609 22 1.128V.872c0-.481.391-.872.872-.872h2.256c.481 0 .872.391.872.872v.256z"/>
                </svg>`;
        }

        function getPumpkinIcon(colors) {
            // Source : https://github.com/twitter/twemoji/blob/master/assets/svg/1f6e2.svg
            return `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
                <path fill="#F4900C" d="M32.664 8.519C29.364 5.134 23.42 4.75 18 4.75S6.636 5.134 3.336 8.519C.582 11.344 0 15.751 0 19.791c0 5.263 1.982 11.311 6.357 14.244C9.364 36.051 13.95 35.871 18 35.871s8.636.18 11.643-1.836C34.018 31.101 36 25.054 36 19.791c0-4.04-.582-8.447-3.336-11.272z"/>
                <path fill="#3F7123" d="M20.783 5.444c.069.42-.222.764-.647.764h-4.451c-.426 0-.717-.344-.647-.764l.745-4.472c.07-.421.476-.764.902-.764h2.451c.426 0 .832.344.901.764l.746 4.472z"/>
                <path fill="#642116" d="M20.654 21.159l-1.598-2.596c-.291-.542-.673-.813-1.057-.817-.383.004-.766.275-1.057.817l-1.598 2.596c-.587 1.093.873 1.716 2.654 1.716s3.243-.624 2.656-1.716zm9.508 3.192c-.045-.075-.126-.121-.214-.121h-.841c-.068 0-.134.028-.181.077l-2.231 2.334-2.698-2.169c-.051-.041-.117-.058-.185-.053-.066.007-.127.041-.168.094l-2.408 3.062-3.054-3.266c-.013-.014-.033-.017-.048-.028-.015-.01-.025-.027-.043-.034-.006-.002-.013 0-.019-.002-.024-.007-.047-.005-.072-.005-.025 0-.048-.002-.072.006-.006.002-.013-.001-.02.002-.018.007-.027.024-.043.034-.016.01-.035.013-.048.027l-3.053 3.266-2.409-3.062c-.041-.053-.102-.087-.168-.094-.066-.006-.133.012-.185.053l-2.698 2.169-2.23-2.334c-.047-.049-.112-.077-.181-.077h-.841c-.087 0-.169.046-.214.121-.045.075-.048.168-.007.245l2.754 5.219c.034.064.093.11.164.127s.145.002.203-.04l2.034-1.458 3.004 3.633c.043.053.106.085.174.09l.019.001c.062 0 .121-.022.167-.063L18 28.836l3.65 3.268c.046.041.105.063.167.063l.019-.001c.068-.005.131-.037.174-.09l3.005-3.633 2.034 1.458c.06.043.133.06.203.04.07-.017.13-.062.163-.126l2.755-5.219c.04-.077.038-.17-.008-.245zm-2.186-8.93c.129 2.127-.784 3.806-3.205 3.953-2.42.146-3.529-1.411-3.658-3.537s1.232-5.12 3.127-5.234c1.896-.116 3.608 2.691 3.736 4.818zm-19.952 0c-.129 2.127.784 3.806 3.205 3.953 2.42.146 3.529-1.411 3.658-3.537s-1.232-5.12-3.127-5.234-3.608 2.691-3.736 4.818z"/>
            </svg>`
        }

        function displayHealth(healthString, fieldType = "cardinal") {
            const el = document.querySelector("#icons");

            const icons = healthString
                .split("")
                .map(char => char === "0" ? "✖️" : ICON_TYPE[fieldType](COLORSETS[fieldType]));

            el.innerHTML = icons.join("");
            setVisible(true);
        }

        function hideHealth() {
            const el = document.querySelector("#icons");
            setVisible(false);
            el.innerHTML = "";
        }

        // NUI Event
        window.addEventListener("message", (event) => {
            const action = event.data.action;

            if (action === "hide") {
                hideHealth();
                return;
            }

            if (action === "show") {
                displayHealth(event.data.health, event.data.field);
                return;
            }
        });
    </script>
</body>
</html>
