!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.verifyExportArgType=t.onNpwdEvent=t.RegisterNuiProxy=t.playerLoaded=t.RegisterNuiCB=void 0;const o=n(4),s=n(3);t.default=class{constructor(e){this._defaultSettings={promiseTimeout:15e3},this.setSettings(e)}setSettings(e){this._settings=Object.assign(Object.assign({},this._defaultSettings),e)}emitNetPromise(e,...t){return new Promise((n,i)=>{let s=!1;setTimeout(()=>{s=!0,i(`${e} has timed out after ${this._settings.promiseTimeout} ms`)},this._settings.promiseTimeout);const a=(0,o.uuidv4)(),r=`${e}:${a}`;emitNet(e,r,...t);const l=e=>{removeEventListener(r,l),s||n(e)};onNet(r,l)})}};t.RegisterNuiCB=(e,t)=>{RegisterNuiCallbackType(e),on("__cfx_nui:"+e,t)};t.playerLoaded=()=>new Promise(t=>{const n=setInterval(()=>{e.isPlayerLoaded&&t(n)},50)}).then(e=>clearInterval(e));t.RegisterNuiProxy=n=>{RegisterNuiCallbackType(n),on("__cfx_nui:"+n,(o,a)=>i(void 0,void 0,void 0,(function*(){e.isPlayerLoaded||(yield(0,t.playerLoaded)());try{const e=yield s.ClUtils.emitNetPromise(n,o);a(e)}catch(e){console.error("Error encountered while listening to resp. Error:",e),a({status:"error"})}})))};t.onNpwdEvent=(e,t)=>{onNet(e,t)};t.verifyExportArgType=(e,t,n)=>{const i=typeof t;if(!n.includes(i))throw new Error(`Export ${e} was called with incorrect argument type (${n.join(", ")}. Passed: ${t}, Type: ${i})`)}}).call(this,n(2))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendSocietyEvent=t.sendCameraEvent=t.sendContactsEvent=t.sendMarketplaceEvent=t.sendNotesEvent=t.sendMessageEvent=t.sendMessage=void 0;const o=i(n(7));function s(e,t,n){return SendNUIMessage({app:e,method:t,data:n})}t.sendMessage=s,t.sendMessageEvent=function(e,t={}){return s(o.default.MESSAGES,e,t)},t.sendNotesEvent=function(e,t={}){return s(o.default.NOTES,e,t)},t.sendMarketplaceEvent=function(e,t={}){s(o.default.MARKETPLACE,e,t)},t.sendContactsEvent=function(e,t={}){s(o.default.CONTACTS,e,t)},t.sendCameraEvent=function(e,t={}){s(o.default.CAMERA,e,t)},t.sendSocietyEvent=function(e,t={}){s(o.default.SOCIETIES,e,t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClUtils=t.config=void 0;const o=i(n(0));t.config=JSON.parse(LoadResourceFile(GetCurrentResourceName(),"config.json")),n(6),n(16),n(18),n(19),n(21),n(22),n(24),n(26),n(28),n(13),n(9),n(31),t.ClUtils=new o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidv4=t.Delay=void 0;t.Delay=e=>new Promise(t=>setTimeout(t,e));t.uuidv4=()=>{let e="";for(let t=0;t<32;t+=1)switch(t){case 8:case 20:e+="-",e+=(16*Math.random()|0).toString(16);break;case 12:e+="-",e+="4";break;case 16:e+="-",e+=(4*Math.random()|8).toString(16);break;default:e+=(16*Math.random()|0).toString(16)}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationService=void 0;const i=n(15);t.animationService=new i.AnimationService},function(e,t,n){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.hidePhone=t.showPhone=void 0;const o=n(1),s=n(8),a=n(3),r=n(5),l=n(0),c=n(10);e.isPhoneOpen=!1,e.isPhoneDisabled=!1,e.isPlayerLoaded=!1;const E=e.exports;onNet(s.PhoneEvents.SET_PLAYER_LOADED,t=>{e.isPlayerLoaded=t,t||(0,o.sendMessage)("PHONE",s.PhoneEvents.UNLOAD_CHARACTER,{})}),RegisterKeyMapping(a.config.general.toggleCommand,"Afficher le téléphone","keyboard",a.config.general.toggleKey),setTimeout(()=>{emit("chat:addSuggestion",""+a.config.general.toggleCommand,"Toggle displaying your cellphone")},1e3);t.showPhone=()=>i(void 0,void 0,void 0,(function*(){e.isPhoneOpen=!0;const t=(()=>{let e=GetClockHours(),t=GetClockMinutes();return e<10&&(e="0"+e),t<10&&(t="0"+t),`${e}:${t}`})();yield r.animationService.openPhone(),emitNet(s.PhoneEvents.FETCH_CREDENTIALS),SetCursorLocation(.9,.922),(0,o.sendMessage)("PHONE",s.PhoneEvents.SET_VISIBILITY,!0),(0,o.sendMessage)("PHONE",s.PhoneEvents.SET_TIME,t),SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!0),emit("npwd:disableControlActions",!0)}));t.hidePhone=()=>i(void 0,void 0,void 0,(function*(){e.isPhoneOpen=!1,(0,o.sendMessage)("PHONE",s.PhoneEvents.SET_VISIBILITY,!1),yield r.animationService.closePhone(),SetNuiFocus(!1,!1),SetNuiFocusKeepInput(!1),emit("npwd:disableControlActions",!1)})),RegisterCommand(a.config.general.toggleCommand,()=>i(void 0,void 0,void 0,(function*(){e.isPhoneDisabled||(yield function(){return i(this,void 0,void 0,(function*(){if(a.config.PhoneAsItem.enabled){if(!(yield i(void 0,void 0,void 0,(function*(){const e=yield Promise.resolve(E[a.config.PhoneAsItem.exportResource][a.config.PhoneAsItem.exportFunction]());if("number"!=typeof e&&"boolean"!=typeof e)throw new Error("You must return either a boolean or number from your export function");return!!e}))))return void E["soz-hud"].DrawNotification("~r~Vous n'avez pas de télephone")}if(e.isPhoneOpen)return yield(0,t.hidePhone)();yield(0,t.showPhone)()}))}())})),!1),RegisterCommand("phone:restart",()=>i(void 0,void 0,void 0,(function*(){yield(0,t.hidePhone)(),(0,o.sendMessage)("PHONE","phoneRestart",{})})),!1);onNet(s.PhoneEvents.SEND_CREDENTIALS,(e,t)=>{(0,o.sendMessage)("SIMCARD",s.PhoneEvents.SET_NUMBER,e),(0,o.sendMessage)("SOCIETY_SIMCARD",s.PhoneEvents.SET_SOCIETY_NUMBER,t),a.ClUtils.emitNetPromise(c.SettingsEvents.SET_AVATAR).then(e=>{(0,o.sendMessage)("AVATAR",c.SettingsEvents.SET_AVATAR,e.data)})}),on("onResourceStop",e=>{e===GetCurrentResourceName()&&((0,o.sendMessage)("PHONE",s.PhoneEvents.SET_VISIBILITY,!1),SetNuiFocus(!1,!1),r.animationService.endPhoneCall(),r.animationService.closePhone(),ClearPedTasks(PlayerPedId()))}),(0,l.RegisterNuiCB)(s.PhoneEvents.CLOSE_PHONE,(e,n)=>i(void 0,void 0,void 0,(function*(){yield(0,t.hidePhone)(),n()}))),(0,l.RegisterNuiCB)(s.PhoneEvents.TOGGLE_KEYS,({keepGameFocus:t},n)=>i(void 0,void 0,void 0,(function*(){e.isPhoneOpen&&SetNuiFocusKeepInput(t),n({})})))}).call(this,n(2))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MESSAGES:"MESSAGES",NOTES:"NOTES",MARKETPLACE:"MARKETPLACE",CONTACTS:"CONTACTS",CAMERA:"CAMERA",SOCIETIES:"SOCIETIES",SOCIETY_MESSAGES:"SOCIETY_MESSAGES"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorStringKeys=t.PhoneEvents=t.PHONE_NUMBER_REGEX=void 0,t.PHONE_NUMBER_REGEX=/^([0-9]{3}-[0-9]{4})|([0-9]{7})$/,function(e){e.OPEN_APP="npwd:openApp",e.OPEN_PHONE="npwd:open",e.CLOSE_PHONE="npwd:close",e.UNLOAD_CHARACTER="npwd:unloadCharacter",e.SET_VISIBILITY="npwd:setVisibility",e.ADD_SNACKBAR_ALERT="npwd:setSnackarAlert",e.SET_NUMBER="npwd:setNumber",e.SET_SOCIETY_NUMBER="npwd:setSocietyNumber",e.SET_PHONE_READY="npwd:phoneReady",e.SET_CONFIG="npwd:setPhoneConfig",e.SET_TIME="npwd:setGameTime",e.SEND_CREDENTIALS="npwd:sendCredentials",e.FETCH_CREDENTIALS="npwd:getCredentials",e.TOGGLE_KEYS="npwd:toggleAllControls",e.SET_PLAYER_LOADED="npwd:setPlayerLoaded"}(t.PhoneEvents||(t.PhoneEvents={})),function(e){e.SERVER_ERROR="GENERAL_SERVER_ERROR",e.DELETE_FAILED="DELETE_FAILED",e.ADD_FAILED="ADD_FAILED",e.UPDATE_FAILED="UPDATED_FAILED",e.FETCH_FAILED="FETCH_FAILED"}(t.ErrorStringKeys||(t.ErrorStringKeys={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.removePhoneProp=t.newPhoneProp=void 0;const o=n(4);let s=0,a=!1;function r(){0!=s&&(DeleteEntity(s),s=0,a=!1)}t.newPhoneProp=()=>i(void 0,void 0,void 0,(function*(){if(r(),a)a&&console.log("prop already created");else{for(RequestModel("soz_prop_phone");!HasModelLoaded("soz_prop_phone");)yield(0,o.Delay)(1);const e=PlayerPedId(),[t,n,i]=GetEntityCoords(e,!0);s=CreateObject(GetHashKey("soz_prop_phone"),t,n,i+.2,!0,!0,!0);const r=GetPedBoneIndex(e,28422);AttachEntityToEntity(s,e,r,0,0,0,0,0,-0,!0,!0,!1,!0,1,!0),a=!0}})),t.removePhoneProp=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsEvents=void 0,function(e){e.UPDATE_PICTURE="npwd:updateProfilePicture",e.SET_AVATAR="npwd:setAvatar"}(t.SettingsEvents||(t.SettingsEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactEvents=t.ContactsDatabaseLimits=void 0,function(e){e[e.number=20]="number",e[e.display=255]="display"}(t.ContactsDatabaseLimits||(t.ContactsDatabaseLimits={})),function(e){e.GET_CONTACTS="npwd:getContacts",e.ADD_CONTACT="npwd:addContacts",e.UPDATE_CONTACT="npwd:updateContact",e.DELETE_CONTACT="npwd:deleteContact",e.ADD_CONTACT_EXPORT="npwd:addContactExport"}(t.ContactEvents||(t.ContactEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotesEvents=void 0,function(e){e.ADD_NOTE="npwd:addNote",e.FETCH_ALL_NOTES="npwd:fetchAllNotes",e.DELETE_NOTE="npwd:deleteNote",e.UPDATE_NOTE="npwd:updateNote",e.ADD_NOTE_EXPORT="npwd:addNoteExport"}(t.NotesEvents||(t.NotesEvents={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.initializeCallHandler=void 0;const o=n(14),s=n(29),a=n(5),r=n(30),l=n(0),c=n(3),E=new s.CallService;t.initializeCallHandler=(e,t)=>i(void 0,void 0,void 0,(function*(){if(!E.isInCall())try{const n=yield c.ClUtils.emitNetPromise(o.CallEvents.INITIALIZE_CALL,e);if(a.animationService.startPhoneCall(),"ok"!==n.status)return t(n);const{transmitter:i,isTransmitter:s,receiver:r,isUnavailable:l}=n.data;E.handleStartCall(i,r,s,l),t({status:"ok"})}catch(e){console.error(e),t({status:"error",errorMsg:"CLIENT_TIMED_OUT"})}})),(0,l.RegisterNuiCB)(o.CallEvents.INITIALIZE_CALL,t.initializeCallHandler),(0,r.onNetTyped)(o.CallEvents.START_CALL,e=>{const{transmitter:t,isTransmitter:n,receiver:i,isUnavailable:o}=e;E.handleStartCall(t,i,n,o)}),(0,l.RegisterNuiCB)(o.CallEvents.ACCEPT_CALL,(e,t)=>{a.animationService.startPhoneCall(),(0,r.emitNetTyped)(o.CallEvents.ACCEPT_CALL,e),t({})}),(0,r.onNetTyped)(o.CallEvents.WAS_ACCEPTED,e=>{E.handleCallAccepted(e)}),(0,l.RegisterNuiCB)(o.CallEvents.REJECTED,(e,t)=>{(0,r.emitNetTyped)(o.CallEvents.REJECTED,e),t({})}),onNet(o.CallEvents.WAS_REJECTED,()=>i(void 0,void 0,void 0,(function*(){E.handleRejectCall(),a.animationService.endPhoneCall()}))),(0,l.RegisterNuiCB)(o.CallEvents.END_CALL,(e,t)=>i(void 0,void 0,void 0,(function*(){try{const n=yield c.ClUtils.emitNetPromise(o.CallEvents.END_CALL,e);if("error"===n.status)return console.error(n.errorMsg);E.handleEndCall(),t({})}catch(e){console.error(e),t({status:"error",errorMsg:"CLIENT_TIMED_OUT"})}a.animationService.endPhoneCall()}))),onNet(o.CallEvents.WAS_ENDED,()=>{E.handleEndCall(),a.animationService.endPhoneCall()}),(0,l.RegisterNuiProxy)(o.CallEvents.FETCH_CALLS),onNet(o.CallEvents.SEND_ALERT,e=>{E.handleSendAlert(e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallEvents=t.CallRejectReasons=void 0,function(e){e[e.DECLINED=0]="DECLINED",e[e.BUSY_LINE=1]="BUSY_LINE"}(t.CallRejectReasons||(t.CallRejectReasons={})),function(e){e.INITIALIZE_CALL="npwd:beginCall",e.START_CALL="npwd:startCall",e.ACCEPT_CALL="npwd:acceptCall",e.END_CALL="npwd:endCall",e.WAS_ENDED="npwd:callEnded",e.WAS_ACCEPTED="npwd:callAccepted",e.REJECTED="npwd:rejectCall",e.WAS_REJECTED="npwd:callRejected",e.FETCH_CALLS="npwd:fetchCalls",e.SET_CALLER="npwd:setCaller",e.SET_CALL_MODAL="npwd:callModal",e.SEND_ALERT="npwd:callSetAlert"}(t.CallEvents||(t.CallEvents={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationService=t.AnimationState=void 0;const o=n(9),s=n(4);var a;!function(e){e[e.ON_CALL=0]="ON_CALL",e[e.PHONE_OPEN=1]="PHONE_OPEN",e[e.ON_CAMERA=2]="ON_CAMERA"}(a=t.AnimationState||(t.AnimationState={}));t.AnimationService=class{constructor(){this.onCall=!1,this.phoneOpen=!1,this.onCamera=!1}createAnimationInterval(){this.animationInterval=setInterval(()=>i(this,void 0,void 0,(function*(){const e=PlayerPedId();this.onCall?this.handleCallAnimation(e):this.phoneOpen&&!this.onCamera&&this.handleOpenAnimation(e)})),250)}setPhoneState(e,t){switch(e){case a.ON_CALL:this.onCall=t;break;case a.PHONE_OPEN:this.phoneOpen=t;break;case a.ON_CAMERA:this.onCamera=t}this.onCall||this.phoneOpen?this.animationInterval||this.createAnimationInterval():this.animationInterval&&(clearInterval(this.animationInterval),this.animationInterval=null)}handleCallAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleOnCallInVehicle(e):this.handleOnCallNormal(e)}handleOpenAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleOpenVehicleAnim(e):this.handleOpenNormalAnim(e)}handleCallEndAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleCallEndVehicleAnim(e):this.handleCallEndNormalAnim(e)}handleCloseAnimation(e){IsPedInAnyVehicle(e,!0)?this.handleCloseVehicleAnim(e):this.handleCloseNormalAnim(e)}openPhone(){return i(this,void 0,void 0,(function*(){(0,o.newPhoneProp)(),this.onCall||this.handleOpenAnimation(PlayerPedId()),this.setPhoneState(a.PHONE_OPEN,!0)}))}closePhone(){return i(this,void 0,void 0,(function*(){(0,o.removePhoneProp)(),this.setPhoneState(a.PHONE_OPEN,!1),this.onCall||this.handleCloseAnimation(PlayerPedId())}))}startPhoneCall(){return i(this,void 0,void 0,(function*(){this.handleCallAnimation(PlayerPedId()),this.setPhoneState(a.ON_CALL,!0)}))}endPhoneCall(){return i(this,void 0,void 0,(function*(){this.handleCallEndAnimation(PlayerPedId()),this.setPhoneState(a.ON_CALL,!1)}))}openCamera(){return i(this,void 0,void 0,(function*(){this.setPhoneState(a.ON_CAMERA,!0)}))}closeCamera(){return i(this,void 0,void 0,(function*(){this.setPhoneState(a.ON_CAMERA,!1)}))}loadAnimDict(e){return i(this,void 0,void 0,(function*(){for(RequestAnimDict(e);!HasAnimDictLoaded(e);)yield(0,s.Delay)(100)}))}handleOpenVehicleAnim(e){return i(this,void 0,void 0,(function*(){const t="anim@cellphone@in_car@ps",n="cellphone_text_in";yield this.loadAnimDict(t),IsEntityPlayingAnim(e,t,n,3)||(SetCurrentPedWeapon(e,2725352035,!0),TaskPlayAnim(e,t,n,7,-1,-1,50,0,!1,!1,!1))}))}handleOpenNormalAnim(e){return i(this,void 0,void 0,(function*(){const t="cellphone@",n="cellphone_text_in";yield this.loadAnimDict(t),IsEntityPlayingAnim(e,t,n,3)||(SetCurrentPedWeapon(e,2725352035,!0),TaskPlayAnim(e,t,n,8,-1,-1,50,0,!1,!1,!1))}))}handleCloseVehicleAnim(e){return i(this,void 0,void 0,(function*(){const t="anim@cellphone@in_car@ps";StopAnimTask(e,t,"cellphone_text_in",1),StopAnimTask(e,t,"cellphone_call_to_text",1),(0,o.removePhoneProp)()}))}handleCloseNormalAnim(e){return i(this,void 0,void 0,(function*(){const t="cellphone@",n="cellphone_text_out";StopAnimTask(e,t,"cellphone_text_in",1),yield(0,s.Delay)(100),yield this.loadAnimDict(t),TaskPlayAnim(e,t,n,7,-1,-1,50,0,!1,!1,!1),yield(0,s.Delay)(200),StopAnimTask(e,t,n,1),(0,o.removePhoneProp)()}))}handleOnCallInVehicle(e){return i(this,void 0,void 0,(function*(){const t="anim@cellphone@in_car@ps",n="cellphone_call_listen_base";IsEntityPlayingAnim(e,t,n,3)||(yield this.loadAnimDict(t),TaskPlayAnim(e,t,n,3,3,-1,49,0,!1,!1,!1))}))}handleOnCallNormal(e){return i(this,void 0,void 0,(function*(){const t="cellphone@",n="cellphone_call_listen_base";IsEntityPlayingAnim(e,t,n,3)||(yield this.loadAnimDict(t),TaskPlayAnim(e,t,n,3,3,-1,49,0,!1,!1,!1))}))}handleCallEndVehicleAnim(e){return i(this,void 0,void 0,(function*(){const t="anim@cellphone@in_car@ps";StopAnimTask(e,t,"cellphone_call_listen_base",1),yield this.loadAnimDict(t),TaskPlayAnim(e,t,"cellphone_call_to_text",1.3,5,-1,50,0,!1,!1,!1)}))}handleCallEndNormalAnim(e){return i(this,void 0,void 0,(function*(){IsEntityPlayingAnim(e,"cellphone@","cellphone_call_listen_base",49)&&(yield this.loadAnimDict("cellphone@"),TaskPlayAnim(e,"cellphone@","cellphone_call_to_text",2.5,8,-1,50,0,!1,!1,!1))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(17),o=n(1);onNet("phone:client:bank:updateBalance",(e,t)=>{(0,o.sendMessage)("BANK",i.BankEvents.SEND_CREDENTIALS,{name:e,balance:t})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BankEvents=void 0,function(e){e.GET_CREDENTIALS="npwd:getBankCredentials",e.SEND_CREDENTIALS="npwd:sendBankCredentials",e.FETCH_TRANSACTIONS="npwd:fetchAllTransactions",e.TRANSACTION_NOTIFICATION="npwd:bankTransactionNotification",e.TRANSACTION_ALERT="npwd:bankTransactionAlert",e.SEND_ALERT="npwd:sendBankAlert",e.SEND_NOTIFICATION="npwd:sendBankNotification"}(t.BankEvents||(t.BankEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(11),o=n(0);(0,o.RegisterNuiProxy)(i.ContactEvents.GET_CONTACTS),(0,o.RegisterNuiProxy)(i.ContactEvents.ADD_CONTACT),(0,o.RegisterNuiProxy)(i.ContactEvents.DELETE_CONTACT),(0,o.RegisterNuiProxy)(i.ContactEvents.UPDATE_CONTACT)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(20),o=n(0),s=n(1);(0,o.RegisterNuiProxy)(i.MarketplaceEvents.FETCH_LISTING),(0,o.RegisterNuiProxy)(i.MarketplaceEvents.ADD_LISTING),(0,o.RegisterNuiProxy)(i.MarketplaceEvents.DELETE_LISTING),(0,o.RegisterNuiProxy)(i.MarketplaceEvents.REPORT_LISTING),onNet(i.MarketplaceEvents.BROADCAST_ADD,e=>{(0,s.sendMarketplaceEvent)(i.MarketplaceEvents.BROADCAST_ADD,e)}),onNet(i.MarketplaceEvents.BROADCAST_DELETE,e=>{(0,s.sendMarketplaceEvent)(i.MarketplaceEvents.BROADCAST_DELETE,e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarketplaceEvents=t.ListingTypeResp=t.MarketplaceDatabaseLimits=void 0,function(e){e[e.title=255]="title",e[e.description=255]="description",e[e.url=255]="url"}(t.MarketplaceDatabaseLimits||(t.MarketplaceDatabaseLimits={})),function(e){e.DUPLICATE="duplicate"}(t.ListingTypeResp||(t.ListingTypeResp={})),function(e){e.ADD_LISTING="npwd:addListing",e.FETCH_LISTING="npwd:fetchAllListings",e.DELETE_LISTING="npwd:marketplaceDeleteListing",e.DELETE_LISTINGS_ON_DROP="npwd:marketplaceDeleteListingsOnDrop",e.REPORT_LISTING="npwd:reportListing",e.BROADCAST_ADD="npwd:sendMarketplaceBroadcastAdd",e.BROADCAST_DELETE="npwd:sendMarketplaceBroadcastDelete"}(t.MarketplaceEvents||(t.MarketplaceEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),o=n(0);(0,o.RegisterNuiProxy)(i.NotesEvents.ADD_NOTE),(0,o.RegisterNuiProxy)(i.NotesEvents.FETCH_ALL_NOTES),(0,o.RegisterNuiProxy)(i.NotesEvents.UPDATE_NOTE),(0,o.RegisterNuiProxy)(i.NotesEvents.DELETE_NOTE)},function(e,t,n){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(23),s=n(4),a=n(1),r=n(3),l=n(5),c=n(0),E=GetConvar("SCREENSHOT_BASIC_TOKEN","none"),d=e.exports;let u=!1,S=!0,C=!1;(0,c.RegisterNuiCB)(o.PhotoEvents.ENTER_CAMERA,(e,t)=>i(void 0,void 0,void 0,(function*(){for(yield l.animationService.openCamera(),emit("npwd:disableControlActions",!1),u=!0,CreateMobilePhone(1),CellCamActivate(!0,!0),emit(o.PhotoEvents.ENTER_CAMERA);u;)yield(0,s.Delay)(0),!S&&IsControlJustPressed(0,176)&&(S=!0,SetNuiFocus(!0,!0)),S&&(DisableControlAction(0,1,!0),DisableControlAction(0,2,!0))}))),(0,c.RegisterNuiCB)(o.PhotoEvents.TAKE_PHOTO,(e,t)=>i(void 0,void 0,void 0,(function*(){if("none"!==E){const e=yield _();t(e)}console.error("You may be trying to take a photo, but your token is not setup for upload! See NPWD Docs for more info!"),S=!0,SetNuiFocus(!0,!0)}))),(0,c.RegisterNuiCB)(o.PhotoEvents.TOGGLE_CAMERA,(e,t)=>i(void 0,void 0,void 0,(function*(){var e;C=!C,e=C,Citizen.invokeNative("0x2491A93618B7D838",e),S=!0,SetNuiFocus(!0,!0)}))),(0,c.RegisterNuiCB)(o.PhotoEvents.TOGGLE_CONTROL_CAMERA,(e,t)=>i(void 0,void 0,void 0,(function*(){S=!S,SetNuiFocus(S,S)}))),(0,c.RegisterNuiCB)(o.PhotoEvents.EXIT_CAMERA,(e,t)=>i(void 0,void 0,void 0,(function*(){C=!1,S=!0,u=!1,SetNuiFocus(!0,!0),yield v(),emit(o.PhotoEvents.EXIT_CAMERA),emit("npwd:disableControlActions",!0),yield l.animationService.closeCamera()})));const _=()=>i(void 0,void 0,void 0,(function*(){ClearHelp(!0),yield(0,s.Delay)(0);const e=yield A();return DestroyMobilePhone(),CellCamActivate(!1,!1),l.animationService.openPhone(),emit("npwd:disableControlActions",!0),yield(0,s.Delay)(200),e})),v=()=>i(void 0,void 0,void 0,(function*(){(0,a.sendCameraEvent)(o.PhotoEvents.CAMERA_EXITED),yield l.animationService.closeCamera(),emit("npwd:disableControlActions",!0),DestroyMobilePhone(),CellCamActivate(!1,!1)})),A=()=>new Promise((e,t)=>{if("none"===E&&r.config.images.useAuthorization)return console.error("Screenshot basic token not found. Please set in server.cfg");d["screenshot-basic"].requestScreenshotUpload(r.config.images.url,r.config.images.type,{encoding:r.config.images.imageEncoding,headers:{authorization:r.config.images.useAuthorization?`${r.config.images.authorizationPrefix} ${E}`:void 0,"content-type":r.config.images.contentType}},n=>i(void 0,void 0,void 0,(function*(){try{let t=JSON.parse(n);for(const e of r.config.images.returnedDataIndexes)t=t[e];const i=yield r.ClUtils.emitNetPromise(o.PhotoEvents.UPLOAD_PHOTO,t);e(i)}catch(e){t(e.message)}})))});(0,c.RegisterNuiProxy)(o.PhotoEvents.FETCH_PHOTOS),(0,c.RegisterNuiProxy)(o.PhotoEvents.DELETE_PHOTO)}).call(this,n(2))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoEvents=void 0,function(e){e.ENTER_CAMERA="phone:camera:enter",e.TAKE_PHOTO="phone:camera:take",e.TOGGLE_CAMERA="phone:camera:toggle",e.EXIT_CAMERA="phone:camera:exit",e.TOGGLE_CONTROL_CAMERA="phone:camera:toggleControl",e.CAMERA_EXITED="npwd:cameraExited",e.TAKE_PHOTO_SUCCESS="npwd:TakePhotoSuccess",e.UPLOAD_PHOTO="npwd:UploadPhoto",e.FETCH_PHOTOS="npwd:FetchPhotos",e.DELETE_PHOTO="npwd:deletePhoto"}(t.PhotoEvents||(t.PhotoEvents={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(25),s=n(1),a=n(0);(0,a.RegisterNuiProxy)(o.MessageEvents.FETCH_MESSAGE_CONVERSATIONS),(0,a.RegisterNuiProxy)(o.MessageEvents.DELETE_MESSAGE),(0,a.RegisterNuiProxy)(o.MessageEvents.FETCH_MESSAGES),(0,a.RegisterNuiProxy)(o.MessageEvents.CREATE_MESSAGE_CONVERSATION),(0,a.RegisterNuiProxy)(o.MessageEvents.DELETE_CONVERSATION),(0,a.RegisterNuiProxy)(o.MessageEvents.SEND_MESSAGE),(0,a.RegisterNuiCB)(o.MessageEvents.SET_WAYPOINT,(e,t)=>i(void 0,void 0,void 0,(function*(){0!==e.x&&0!==e.y&&SetNewWaypoint(parseInt(e.x),parseInt(e.y))}))),(0,a.RegisterNuiCB)(o.MessageEvents.GET_POSITION,(e,t)=>i(void 0,void 0,void 0,(function*(){const[e,n,i]=GetEntityCoords(PlayerPedId(),!0);t({data:{x:e,y:n}})}))),(0,a.RegisterNuiCB)(o.MessageEvents.GET_DESTINATION,(e,t)=>i(void 0,void 0,void 0,(function*(){const[e,n,i]=GetBlipInfoIdCoord(GetFirstBlipInfoId(8));t({data:{x:e,y:n}})}))),onNet(o.MessageEvents.SEND_MESSAGE_SUCCESS,e=>{(0,s.sendMessageEvent)(o.MessageEvents.SEND_MESSAGE_SUCCESS,e)}),onNet(o.MessageEvents.CREATE_MESSAGE_BROADCAST,e=>{(0,s.sendMessageEvent)(o.MessageEvents.CREATE_MESSAGE_BROADCAST,e)}),onNet(o.MessageEvents.CREATE_MESSAGE_CONVERSATION_SUCCESS,e=>{(0,s.sendMessageEvent)(o.MessageEvents.CREATE_MESSAGE_CONVERSATION_SUCCESS,e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageEvents=void 0,function(e){e.FETCH_MESSAGE_CONVERSATIONS="npwd:fetchMessageGroups",e.FETCH_MESSAGE_GROUPS_SUCCESS="npwd:fetchMessageGroupsSuccess",e.FETCH_MESSAGE_GROUPS_FAILED="npwd:fetchMessageGroupsFailed",e.CREATE_MESSAGE_CONVERSATION="npwd:createMessageGroup",e.CREATE_MESSAGE_CONVERSATION_SUCCESS="npwd:createMessageConversationSuccess",e.CREATE_MESSAGE_GROUP_SUCCESS="npwd:createMessageGroupSuccess",e.CREATE_MESSAGE_GROUP_FAILED="npwd:createMessageGroupFailed",e.SEND_MESSAGE="npwd:sendMessage",e.SEND_MESSAGE_SUCCESS="npwd:sendMessageSuccess",e.SEND_MESSAGE_FAILED="npwd:sendMessageFailed",e.DELETE_MESSAGE="npwd:deleteMessage",e.FETCH_MESSAGES="npwd:fetchMessages",e.FETCH_MESSAGES_SUCCESS="npwd:fetchMessagesSuccess",e.FETCH_MESSAGES_FAILED="npwd:fetchMessagesFailed",e.FETCH_INITIAL_MESSAGES="npwd:fetchInitialMessages",e.ACTION_RESULT="npwd:setMessagesAlert",e.CREATE_MESSAGE_BROADCAST="createMessagesBroadcast",e.SET_MESSAGE_READ="npwd:setReadMessages",e.DELETE_CONVERSATION="nwpd:deleteConversation",e.GET_POSITION="nwpd:getCurrentPosition",e.GET_DESTINATION="nwpd:getCurrentDestination",e.SET_WAYPOINT="nwpd:setWaypoint"}(t.MessageEvents||(t.MessageEvents={}))},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(27),s=n(0),a=n(1),r=i(n(7));(0,s.RegisterNuiProxy)(o.SocietyEvents.SEND_SOCIETY_MESSAGE),(0,s.RegisterNuiProxy)(o.SocietyEvents.FETCH_SOCIETY_MESSAGES),(0,s.RegisterNuiProxy)(o.SocietyEvents.RESET_SOCIETY_MESSAGES),(0,s.RegisterNuiProxy)(o.SocietyEvents.UPDATE_SOCIETY_MESSAGE),onNet(o.SocietyEvents.CREATE_MESSAGE_BROADCAST,e=>{(0,a.sendMessage)(r.default.SOCIETY_MESSAGES,o.SocietyEvents.CREATE_MESSAGE_BROADCAST,e)}),onNet(o.SocietyEvents.RESET_SOCIETY_MESSAGES,()=>{(0,a.sendMessage)(r.default.SOCIETY_MESSAGES,o.SocietyEvents.RESET_SOCIETY_MESSAGES,null)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocietyNumberList=t.SocietyEvents=t.SocietiesDatabaseLimits=void 0,function(e){e[e.message=255]="message"}(t.SocietiesDatabaseLimits||(t.SocietiesDatabaseLimits={})),function(e){e.UPDATE_SOCIETY_MESSAGE="npwd:updateSocietyMessage",e.SEND_SOCIETY_MESSAGE="npwd:sendSocietyMessage",e.FETCH_SOCIETY_MESSAGES="npwd:fetchSocietyMessage",e.RESET_SOCIETY_MESSAGES="npwd:resetSocietyMessage",e.SEND_SOCIETY_MESSAGE_SUCCESS="npwd:sendSocietyMessageSuccess",e.CREATE_MESSAGE_BROADCAST="npwd:createSocietyMessagesBroadcast"}(t.SocietyEvents||(t.SocietyEvents={})),t.SocietyNumberList={lspd:"555-LSPD",medic:"555-LSMS",lscs:"555-LSCS"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10);(0,n(0).RegisterNuiProxy)(i.SettingsEvents.UPDATE_PICTURE)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.CallService=void 0;const i=n(14),o=e.exports;class s{constructor(){this.currentCall=0}static sendCallAction(e,t){SendNUIMessage({app:"CALL",method:e,data:t})}isInCall(){return 0!==this.currentCall}openCallModal(e){s.sendCallAction(i.CallEvents.SET_CALL_MODAL,e)}handleRejectCall(){this.isInCall()||(this.openCallModal(!1),s.sendCallAction(i.CallEvents.SET_CALLER,null))}handleStartCall(e,t,n,o){if(this.isInCall())return emitNet(i.CallEvents.REJECTED,e,i.CallRejectReasons.BUSY_LINE);this.openCallModal(!0),SendNUIMessage({app:"CALL",method:i.CallEvents.SET_CALLER,data:{active:!0,transmitter:e,receiver:t,isTransmitter:n,accepted:!1,isUnavailable:o}})}handleCallAccepted(e){this.currentCall=e.channelId,o["soz-voip"].setCallChannel(e.channelId),s.sendCallAction(i.CallEvents.SET_CALLER,e)}handleEndCall(){this.currentCall=0,o["soz-voip"].setCallChannel(0),this.openCallModal(!1),s.sendCallAction(i.CallEvents.SET_CALLER,null)}handleSendAlert(e){SendNUIMessage({app:"DIALER",method:i.CallEvents.SEND_ALERT,data:e})}}t.CallService=s}).call(this,n(2))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.emitNetTyped=t.onNetTyped=t.clean=t.getSource=void 0;t.getSource=()=>e.source;t.clean=e=>e?e.replace(/[^0-9a-z]/gi,""):e;t.onNetTyped=(e,t)=>onNet(e,t);t.emitNetTyped=(e,t,n)=>{if(n)return emitNet(e,n,t);emitNet(e,t)}}).call(this,n(2))},function(e,t,n){"use strict";(function(e){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function r(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),s=n(8),a=n(0),r=n(13),l=n(11),c=n(12),E=n(6),d=e.exports;d("openApp",e=>{(0,a.verifyExportArgType)("openApp",e,["string"]),(0,o.sendMessage)("PHONE",s.PhoneEvents.OPEN_APP,e)}),d("setPhoneVisible",t=>i(void 0,void 0,void 0,(function*(){(0,a.verifyExportArgType)("setPhoneVisible",t,["boolean","number"]);const n=e.isPhoneDisabled,i=e.isPhoneOpen;if(n&&!t&&i)return;!!t?yield(0,E.showPhone)():yield(0,E.hidePhone)()}))),d("isPhoneVisible",()=>e.isPhoneOpen),d("setPhoneFocus",e=>{SetNuiFocus(e,e),SetNuiFocusKeepInput(e)}),d("setPhoneDisabled",t=>{(0,a.verifyExportArgType)("setPhoneVisible",t,["boolean","number"]);const n=!!t;e.isPhoneDisabled=n}),d("isPhoneDisabled",()=>e.isPhoneDisabled),d("startPhoneCall",e=>{(0,a.verifyExportArgType)("startPhoneCall",e,["string"]),(0,r.initializeCallHandler)({receiverNumber:e})}),d("fillNewContact",e=>{(0,a.verifyExportArgType)("fillNewContact",e,["object"]),(0,o.sendContactsEvent)(l.ContactEvents.ADD_CONTACT_EXPORT,e)}),d("fillNewNote",e=>{(0,a.verifyExportArgType)("fillNewNOte",e,["object"]),(0,o.sendNotesEvent)(c.NotesEvents.ADD_NOTE_EXPORT,e)})}).call(this,n(2))}]);