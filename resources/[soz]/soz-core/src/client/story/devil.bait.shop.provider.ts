import { Once, OnceStep } from '@core/decorators/event';
import { Inject } from '@core/decorators/injectable';
import { Provider } from '@core/decorators/provider';
import { Feature, isFeatureEnabled } from '@public/shared/features';
import { WorldObject } from '@public/shared/object';
import { toVector4Object, Vector4 } from '@public/shared/polyzone/vector';

import { PedFactory } from '../factory/ped.factory';
import { InventoryManager } from '../inventory/inventory.manager';
import { ItemService } from '../item/item.service';
import { ObjectProvider } from '../object/object.provider';
import { TargetFactory } from '../target/target.factory';

type PropFromCollection = [string, Vector4, any, number];

const devilshopprops: PropFromCollection[] = [
    [
        'm23_1_prop_m31_haybales_01a',
        [23.787317276000977, 637.8519897460938, 206.4380187988281, 279.3663024902344],
        {
            0: 0.1627456247806549,
            1: -0.9866679906845093,
            2: 0,
            3: 0,
            4: 0.9866681694984436,
            5: 0.1627456247806549,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 23.787317276000977,
            13: 637.8519897460938,
            14: 206.4380187988281,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_haybales_01a',
        [33.61039352416992, 639.525146484375, 206.31332397460938, 99.57694244384766],
        {
            0: -0.16637203097343445,
            1: 0.9860631227493286,
            2: 0,
            3: 0,
            4: -0.9860629439353943,
            5: -0.16637203097343445,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 33.61039352416992,
            13: 639.525146484375,
            14: 206.31332397460938,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_stack_pk_01b',
        [24.571874618530273, 637.8292236328125, 209.14076232910156, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 24.571874618530273,
            13: 637.8292236328125,
            14: 209.14076232910156,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_stack_pk_01c',
        [33.54725646972656, 639.3099365234375, 209.0069885253906, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 33.54725646972656,
            13: 639.3099365234375,
            14: 209.0069885253906,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_haybales_01a',
        [12.046359062194824, 635.0596923828125, 206.41607666015625, 105.9547424316406],
        {
            0: -0.2748781740665436,
            1: 0.961479127407074,
            2: 0,
            3: 0,
            4: -0.9614789485931396,
            5: -0.2748781740665436,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 12.046359062194824,
            13: 635.0596923828125,
            14: 206.41607666015625,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_stack_pk_01c',
        [11.73376178741455, 634.9374389648438, 209.12013244628906, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 11.73376178741455,
            13: 634.9374389648438,
            14: 209.12013244628906,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_haybales_01a',
        [2.231658697128296, 632.2015991210938, 206.37933349609375, 286.28997802734375],
        {
            0: 0.2804989218711853,
            1: -0.959854245185852,
            2: 0,
            3: 0,
            4: 0.9598544836044312,
            5: 0.2804989218711853,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 2.231658697128296,
            13: 632.2015991210938,
            14: 206.37933349609375,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_stack_pk_01b',
        [2.515658140182495, 632.513732910156, 209.0907745361328, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 2.515658140182495,
            13: 632.513732910156,
            14: 209.0907745361328,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_gravetomb_01a',
        [20.761104583740234, 637.240478515625, 206.7407989501953, 281.5657958984375],
        {
            0: 0.20049311220645905,
            1: -0.9796950221061707,
            2: 0,
            3: 0,
            4: 0.9796952605247498,
            5: 0.20049311220645905,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 20.761104583740234,
            13: 637.240478515625,
            14: 206.7407989501953,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_gravetomb_01a',
        [15.28079605102539, 635.962219238281, 206.70042419433594, 282.8629150390625],
        {
            0: 0.2226191610097885,
            1: -0.9749054312705994,
            2: 0,
            3: 0,
            4: 0.9749056100845337,
            5: 0.2226191610097885,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 15.28079605102539,
            13: 635.962219238281,
            14: 206.70042419433594,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_gravestones_07a',
        [18.20486068725586, 635.942626953125, 206.29998779296875, 12.813019752502441],
        {
            0: 0.9750990867614746,
            1: 0.22177012264728546,
            2: 0,
            3: 0,
            4: -0.22176991403102875,
            5: 0.9750990867614746,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 18.20486068725586,
            13: 635.942626953125,
            14: 206.29998779296875,
            15: 1,
        },
        1,
    ],
    [
        'm23_1_prop_m31_gravestones_07a',
        [18.11042785644531, 636.3399658203125, 206.30355834960938, 14.116302490234375],
        {
            0: 0.9698027968406677,
            1: 0.24389100074768066,
            2: 0,
            3: 0,
            4: -0.24389079213142395,
            5: 0.9698027968406677,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 18.11042785644531,
            13: 636.3399658203125,
            14: 206.30355834960938,
            15: 1,
        },
        1,
    ],
    [
        'prop_water_corpse_02',
        [18.33802604675293, 635.3248901367188, 208.50030517578125, 198.3078155517578],
        {
            0: -2.4023642539978027,
            1: -0.7948681712150574,
            2: 0,
            3: 0,
            4: 0.7951698899269104,
            5: -2.4023609161376953,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 2.5305933952331543,
            11: 0,
            12: 18.33802604675293,
            13: 635.3248901367188,
            14: 208.50030517578125,
            15: 1,
        },
        0,
    ],
    [
        'prop_water_corpse_01',
        [14.531590461730957, 634.712707519531, 207.5152130126953, 12.559466361999512],
        {
            0: 0.9760709404945374,
            1: 0.21745280921459198,
            2: 0,
            3: 0,
            4: -0.21745260059833527,
            5: 0.9760709404945374,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 14.531590461730957,
            13: 634.712707519531,
            14: 207.5152130126953,
            15: 1,
        },
        1,
    ],
    [
        'prop_water_corpse_01',
        [21.96590232849121, 636.4696044921875, 207.4724426269531, 19.3299617767334],
        {
            0: 0.9436280727386475,
            1: 0.3310079574584961,
            2: 0,
            3: 0,
            4: -0.3310077488422394,
            5: 0.9436280727386475,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 21.96590232849121,
            13: 636.4696044921875,
            14: 207.4724426269531,
            15: 1,
        },
        1,
    ],
    [
        'h4_prop_battle_lights_floorred',
        [18.062379837036133, 636.5106201171875, 209.62762451171875, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 18.062379837036133,
            13: 636.5106201171875,
            14: 209.62762451171875,
            15: 1,
        },
        1,
    ],
    [
        'prop_construcionlamp_01',
        [22.873741149902344, 636.871337890625, 209.56466674804688, 282.7884826660156],
        {
            0: 0.22135254740715027,
            1: -0.9751937985420227,
            2: 0,
            3: 0,
            4: 0.975193977355957,
            5: 0.22135254740715027,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 22.873741149902344,
            13: 636.871337890625,
            14: 209.56466674804688,
            15: 1,
        },
        1,
    ],
    [
        'prop_construcionlamp_01',
        [13.344347953796387, 634.6708984375, 209.58290100097656, 103.50825500488281],
        {
            0: -0.23358550667762756,
            1: 0.9723363518714905,
            2: 0,
            3: 0,
            4: -0.9723361134529114,
            5: -0.23358550667762756,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 13.344347953796387,
            13: 634.6708984375,
            14: 209.58290100097656,
            15: 1,
        },
        1,
    ],
    [
        'v_ilev_cd_lampal',
        [11.392974853515625, 635.9996337890625, 207.11741638183594, 198.1268615722656],
        {
            0: -0.9503699541091919,
            1: -0.31112173199653625,
            2: 0,
            3: 0,
            4: 0.31112194061279297,
            5: -0.9503699541091919,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 11.392974853515625,
            13: 635.9996337890625,
            14: 207.11741638183594,
            15: 1,
        },
        1,
    ],
    [
        'v_ilev_cd_lampal',
        [5.1848673820495605, 634.2349853515625, 207.14564514160156, 195.5544891357422],
        {
            0: -0.9633757472038269,
            1: -0.2681545615196228,
            2: 0,
            3: 0,
            4: 0.2681547701358795,
            5: -0.9633757472038269,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 5.1848673820495605,
            13: 634.2349853515625,
            14: 207.14564514160156,
            15: 1,
        },
        1,
    ],
    [
        'v_ilev_cd_lampal',
        [24.02411460876465, 638.906066894531, 207.14178466796875, 189.165283203125],
        {
            0: -0.9872328639030457,
            1: -0.15928280353546143,
            2: 0,
            3: 0,
            4: 0.15928299725055695,
            5: -0.9872328639030457,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 24.02411460876465,
            13: 638.906066894531,
            14: 207.14178466796875,
            15: 1,
        },
        1,
    ],
    [
        'v_ilev_cd_lampal',
        [30.42024803161621, 640.01708984375, 207.15638732910156, 189.87652587890625],
        {
            0: -0.985179603099823,
            1: -0.171525239944458,
            2: 0,
            3: 0,
            4: 0.17152543365955353,
            5: -0.985179603099823,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 30.42024803161621,
            13: 640.01708984375,
            14: 207.15638732910156,
            15: 1,
        },
        1,
    ],
    [
        'prop_water_corpse_01',
        [15.52212905883789, 635.005676269531, 207.4706573486328, 10.509626388549805],
        {
            0: 0.9832243919372559,
            1: 0.18240074813365936,
            2: 0,
            3: 0,
            4: -0.18240055441856384,
            5: 0.9832243919372559,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 15.52212905883789,
            13: 635.005676269531,
            14: 207.4706573486328,
            15: 1,
        },
        1,
    ],
    [
        'prop_water_corpse_01',
        [16.45452117919922, 635.1673583984375, 207.4866943359375, 13.21336555480957],
        {
            0: 0.9735257029533386,
            1: 0.22857801616191864,
            2: 0,
            3: 0,
            4: -0.2285778224468231,
            5: 0.9735257029533386,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 16.45452117919922,
            13: 635.1673583984375,
            14: 207.4866943359375,
            15: 1,
        },
        1,
    ],
    [
        'prop_water_corpse_01',
        [19.96017837524414, 635.994689941406, 207.4862365722656, 6.524977684020996],
        {
            0: 0.9935225248336792,
            1: 0.11363635957241058,
            2: 0,
            3: 0,
            4: -0.11363615840673447,
            5: 0.9935225248336792,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 19.96017837524414,
            13: 635.994689941406,
            14: 207.4862365722656,
            15: 1,
        },
        1,
    ],
    [
        'prop_water_corpse_01',
        [20.96774673461914, 636.225341796875, 207.4927215576172, 9.942371368408203],
        {
            0: 0.9849820137023926,
            1: 0.1726575791835785,
            2: 0,
            3: 0,
            4: -0.17265737056732178,
            5: 0.9849820137023926,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 20.96774673461914,
            13: 636.225341796875,
            14: 207.4927215576172,
            15: 1,
        },
        1,
    ],
    [
        'prop_warninglight_01',
        [20.82382583618164, 636.81494140625, 208.3736877441406, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 20.82382583618164,
            13: 636.81494140625,
            14: 208.3736877441406,
            15: 1,
        },
        1,
    ],
    [
        'prop_warninglight_01',
        [15.372676849365234, 635.5470581054688, 208.3146209716797, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 15.372676849365234,
            13: 635.5470581054688,
            14: 208.3146209716797,
            15: 1,
        },
        1,
    ],
    [
        'xs_prop_arena_trophy_single_01b',
        [19.489765167236328, 636.074951171875, 209.59559631347656, 10.294230461120605],
        {
            0: 0.983903169631958,
            1: 0.178703173995018,
            2: 0,
            3: 0,
            4: -0.17870298027992249,
            5: 0.983903169631958,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 19.489765167236328,
            13: 636.074951171875,
            14: 209.59559631347656,
            15: 1,
        },
        1,
    ],
    [
        'xs_prop_arena_trophy_single_01b',
        [20.580856323242188, 636.3383178710938, 209.5948028564453, 14.544427871704102],
        {
            0: 0.9679533243179321,
            1: 0.25113070011138916,
            2: 0,
            3: 0,
            4: -0.25113052129745483,
            5: 0.9679533243179321,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 20.580856323242188,
            13: 636.3383178710938,
            14: 209.5948028564453,
            15: 1,
        },
        1,
    ],
    [
        'xs_prop_arena_trophy_single_01b',
        [21.79936981201172, 636.5851440429688, 209.59478759765625, 14.907675743103027],
        {
            0: 0.9663416147232056,
            1: 0.257262259721756,
            2: 0,
            3: 0,
            4: -0.257262259721756,
            5: 0.9663416147232056,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1,
            11: 0,
            12: 21.79936981201172,
            13: 636.5851440429688,
            14: 209.59478759765625,
            15: 1,
        },
        1,
    ],
    [
        'xs_prop_arena_trophy_single_01b',
        [15.72048568725586, 635.17578125, 209.59478759765625, 7.740928649902344],
        {
            0: 0.9908873438835144,
            1: 0.13469406962394714,
            2: 0,
            3: 0,
            4: -0.13469386100769043,
            5: 0.9908873438835144,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 15.72048568725586,
            13: 635.17578125,
            14: 209.59478759765625,
            15: 1,
        },
        1,
    ],
    [
        'xs_prop_arena_trophy_single_01b',
        [14.599712371826172, 634.9130249023438, 209.5948028564453, 12.30568790435791],
        {
            0: 0.9770245552062988,
            1: 0.21312741935253143,
            2: 0,
            3: 0,
            4: -0.2131272256374359,
            5: 0.9770245552062988,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 14.599712371826172,
            13: 634.9130249023438,
            14: 209.5948028564453,
            15: 1,
        },
        1,
    ],
    [
        'xs_prop_arena_trophy_single_01b',
        [16.763957977294922, 635.3927001953125, 209.5948028564453, 14.231744766235352],
        {
            0: 0.969309389591217,
            1: 0.2458445131778717,
            2: 0,
            3: 0,
            4: -0.24584431946277618,
            5: 0.969309389591217,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 16.763957977294922,
            13: 635.3927001953125,
            14: 209.5948028564453,
            15: 1,
        },
        1,
    ],
    [
        'prop_beach_fire',
        [17.942245483398438, 637.974182128906, 209.6637268066406, 299.924560546875],
        {
            0: 0.4988592863082886,
            1: -0.8666829466819763,
            2: 0,
            3: 0,
            4: 0.8666831254959106,
            5: 0.4988592863082886,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 17.942245483398438,
            13: 637.974182128906,
            14: 209.6637268066406,
            15: 1,
        },
        1,
    ],
    [
        'prop_cs_protest_sign_01',
        [8.790796279907227, 633.9452514648438, 210.10133361816406, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 8.790796279907227,
            13: 633.9452514648438,
            14: 210.10133361816406,
            15: 1,
        },
        1,
    ],
    [
        'v_med_p_figfish',
        [25.950082778930664, 638.3883666992188, 209.75497436523438, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 25.950082778930664,
            13: 638.3883666992188,
            14: 209.75497436523438,
            15: 1,
        },
        1,
    ],
    [
        'xm_prop_x17_silo_open_01a',
        [10.299943923950195, 672.2091064453125, 199.4130401611328, 13.484404563903809],
        {
            0: 0.9724335670471191,
            1: 0.23318073153495789,
            2: 0,
            3: 0,
            4: -0.23318052291870117,
            5: 0.9724335670471191,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 10.299943923950195,
            13: 672.2091064453125,
            14: 199.4130401611328,
            15: 1,
        },
        1,
    ],
    [
        'xm_prop_x17_silo_rocket_01',
        [10.164291381835938, 672.320617675781, 202.0566711425781, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 10.164291381835938,
            13: 672.320617675781,
            14: 202.0566711425781,
            15: 1,
        },
        1,
    ],
    [
        'xm_prop_x17_silo_01a',
        [9.376077651977539, 671.7572631835938, 190.09706115722656, 11.999812126159668],
        {
            0: 0.9781484007835388,
            1: 0.2079085111618042,
            2: 0,
            3: 0,
            4: -0.20790831744670868,
            5: 0.9781484007835388,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 9.376077651977539,
            13: 671.7572631835938,
            14: 190.09706115722656,
            15: 1,
        },
        1,
    ],
    [
        'xm_prop_x17_silo_01a',
        [10.70307922363281, 672.206604003906, 186.4222717285156, 13.156559944152832],
        {
            0: 0.9737518429756165,
            1: 0.2276126891374588,
            2: 0,
            3: 0,
            4: -0.2276124805212021,
            5: 0.9737518429756165,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 10.70307922363281,
            13: 672.206604003906,
            14: 186.4222717285156,
            15: 1,
        },
        1,
    ],
    [
        'vw_prop_vw_ped_epsilon_01a',
        [17.81316375732422, 638.2938842773438, 209.43353271484375, 253.7837219238281],
        {
            0: -0.33823922276496887,
            1: -1.162969708442688,
            2: 0,
            3: 0,
            4: 1.1631509065628052,
            5: -0.3382325768470764,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.2113826274871826,
            11: 0,
            12: 17.81316375732422,
            13: 638.2938842773438,
            14: 209.43353271484375,
            15: 1,
        },
        0,
    ],
    [
        'prop_jet_bloodsplat_01',
        [-0.7285228967666626, 626.4237670898438, 206.48565673828125, 105.88560485839844],
        {
            0: -0.27371764183044434,
            1: 0.9618101716041565,
            2: 0,
            3: 0,
            4: -0.9618099331855774,
            5: -0.27371764183044434,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: -0.7285228967666626,
            13: 626.4237670898438,
            14: 206.48565673828125,
            15: 1,
        },
        0,
    ],
    [
        'prop_jet_bloodsplat_01',
        [42.37020492553711, 633.7025146484375, 206.4971160888672, 278.30615234375],
        {
            0: 0.14446230232715607,
            1: -0.9895102381706238,
            2: 0,
            3: 0,
            4: 0.9895104169845581,
            5: 0.14446230232715607,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 42.37020492553711,
            13: 633.7025146484375,
            14: 206.4971160888672,
            15: 1,
        },
        0,
    ],
    [
        'p_bloodsplat_s',
        [17.596792221069336, 638.922668457031, 209.60499572753906, 87.7913589477539],
        {
            0: 17.70867156982422,
            1: 1.9413951635360718,
            2: 0,
            3: 0,
            4: -0.008208276703953743,
            5: 0.07487381249666214,
            6: -17.809005737304688,
            7: 0,
            8: -1.9413741827011108,
            9: 17.70848274230957,
            10: 0.07479226589202881,
            11: 0,
            12: 17.596792221069336,
            13: 638.922668457031,
            14: 209.60499572753906,
            15: 1,
        },
        0,
    ],
    [
        'ch_prop_ch_bloodymachete_01a',
        [14.212871551513672, 638.483459472656, 214.8865203857422, 6.015885353088379],
        {
            0: -11.408634185791016,
            1: 1.4091897010803223,
            2: -7.024763107299805,
            3: 0,
            4: 1.651664137840271,
            5: 13.371879577636719,
            6: 0,
            7: 0,
            8: 6.972970485687256,
            9: -0.8610683083534241,
            10: -11.495583534240723,
            11: 0,
            12: 14.212871551513672,
            13: 638.483459472656,
            14: 214.8865203857422,
            15: 1,
        },
        0,
    ],
    [
        'prop_beach_fire',
        [17.59160041809082, 638.0458984375, 209.69288635253906, 348.3388366699219],
        {
            0: 2.139035940170288,
            1: -0.4414607882499695,
            2: 0,
            3: 0,
            4: 0.4415653944015503,
            5: 2.139035940170288,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 2.184126377105713,
            11: 0,
            12: 17.59160041809082,
            13: 638.0458984375,
            14: 209.69288635253906,
            15: 1,
        },
        0,
    ],
    [
        'prop_beach_fire',
        [18.154451370239258, 638.1632080078125, 209.6544647216797, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 18.154451370239258,
            13: 638.1632080078125,
            14: 209.6544647216797,
            15: 1,
        },
        1,
    ],
    [
        'prop_beach_fire',
        [17.256515502929688, 638.2559814453125, 209.65025329589844, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 17.256515502929688,
            13: 638.2559814453125,
            14: 209.65025329589844,
            15: 1,
        },
        1,
    ],
    [
        'prop_beach_fire',
        [17.36155128479004, 638.0579833984375, 209.6991271972656, 0],
        {
            0: 1.0000001192092896,
            1: 0,
            2: 0,
            3: 0,
            4: 0,
            5: 1.0000001192092896,
            6: 0,
            7: 0,
            8: 0,
            9: 0,
            10: 1.0000001192092896,
            11: 0,
            12: 17.36155128479004,
            13: 638.0579833984375,
            14: 209.6991271972656,
            15: 1,
        },
        1,
    ],
];

@Provider()
export class DevilBaitShopProvider {
    @Inject(TargetFactory)
    private targetFactory: TargetFactory;

    @Inject(PedFactory)
    private pedFactory: PedFactory;

    @Inject(InventoryManager)
    private inventoryManager: InventoryManager;

    @Inject(ItemService)
    private itemService: ItemService;

    @Inject(ObjectProvider)
    private objectProvider: ObjectProvider;

    @Once(OnceStep.PlayerLoaded)
    public async onPlayerLoaded() {
        if (!isFeatureEnabled(Feature.Halloween)) {
            return;
        }

        await this.createNariielDevil();
        await this.createKneel([14.74, 639.14, 209.59, 317.65]);
        await this.createKneel([19.79, 640.38, 209.59, 54.72]);
        await this.createOjymasDevil();

        await this.spawnProps();
    }

    private async createNariielDevil() {
        await this.targetFactory.createForPed({
            model: 'mp_f_freemode_01',
            coords: toVector4Object([17.11, 641.29, 209.59, 9.55]),
            modelCustomization: {
                SkinMix: 0.4,
                Hash: -1667301416,
                ShapeMix: 0.9,
                Mother: 21,
                Father: 6,
            },
            components: {
                2: [97, 0, 0],
                3: [16, 1, 0],
                4: [63, 2, 0],
                5: [114, 0, 0],
                6: [41, 2, 0],
                7: [0, 0, 0],
                8: [2, 0, 0],
                10: [195, 0, 0],
                11: [415, 8, 0],
            },
            props: {
                0: [203, 0, 0],
                2: [7, 0, 0],
                6: [1, 0, 0],
            },
            face: {
                CheeksBoneWidth: 0,
                JawBoneWidth: 0,
                JawBoneBackLength: 0,
                EyebrowForward: 0,
                BodyBlemish: -1,
                ChimpBoneWidth: 0,
                NoseWidth: 0,
                NosePeakLength: 0,
                NoseBoneHigh: 0,
                ChimpBoneLower: 0,
                Complexion: -1,
                NeckThickness: 0,
                CheeksWidth: 0,
                NosePeakHeight: 0,
                NosePeakLower: 0,
                NoseBoneTwist: 0,
                CheeksBoneHigh: 0,
                Ageing: -1,
                AddBodyBlemish: -1,
                EyesOpening: 0,
                ChimpHole: 0,
                ChimpBoneLength: 0,
                Moles: -1,
                LipsThickness: -0.3,
                EyebrowHigh: 0,
                EyeColor: 17,
                Blemish: -1,
            },
            hair: {
                BeardOpacity: 1,
                EyebrowOpacity: 1,
                BeardType: -1,
                ChestHairType: -1,
                BeardColor: 0,
                EyebrowColor: 8,
                HairColor: 61,
                ChestHairColor: 0,
                HairType: 106,
                EyebrowType: 1,
                ChestHairOpacity: 1,
                HairSecondaryColor: 54,
            },
            makeup: {
                LipstickOpacity: 0.7,
                BlushOpacity: 0.4,
                FullMakeupType: 1,
                FullMakeupDefaultColor: 1,
                FullMakeupOpacity: 1,
                FullMakeupPrimaryColor: 0,
                BlushType: 0,
                BlushColor: 6,
                LipstickType: 0,
                FullMakeupSecondaryColor: 0,
                LipstickColor: 2,
            },
            tattoos: [],
            invincible: true,
            freeze: true,
            blockevents: true,
            animDict: 'amb@world_human_stand_fishing@idle_a',
            anim: 'idle_a',
            flag: 1,
            target: {
                options: [
                    {
                        label: 'Boutique du diable',
                        icon: 'c:/fishing/fishing-rod.png',
                        action: () => {
                            const FishingProducts = [
                                {
                                    ...this.itemService.getItem('halloween_devil_bait'),
                                    price: 5,
                                    amount: 2000,
                                    slot: 1,
                                },
                            ];

                            this.inventoryManager.openShopInventory(FishingProducts, 'menu_shop_devil');
                        },
                    },
                ],
                distance: 1.5,
            },
            animprops: [
                {
                    bone: 18905,
                    model: 'soz_prop_fishing_rod_11',
                    position: [0.1, 0.05, 0.0001],
                    rotation: [80.0, -120.0, 160.0],
                },
            ],
        });
    }

    private async createKneel(coords: Vector4) {
        await this.pedFactory.createPed({
            model: 'mp_m_freemode_01',
            coords: toVector4Object(coords),
            modelCustomization: {
                Father: 0,
                Hash: 1885233650,
                ShapeMix: 0.75,
                Mother: 31,
                SkinMix: 0.7,
            },
            components: {
                1: [63, 0, 0],
                3: [24, 0, 0],
                4: [25, 0, 0],
                6: [15, 4, 0],
                7: [26, 5, 0],
                8: [33, 0, 0],
                11: [29, 0, 0],
            },
            props: {
                0: [204, 0, 0],
            },
            face: {
                NosePeakLength: 0.0,
                ChimpBoneWidth: 0.0,
                EyebrowHigh: 0.0,
                EyebrowForward: 0.0,
                Complexion: -1,
                ChimpHole: 0.0,
                Blemish: -1,
                EyeColor: -1,
                JawBoneWidth: -0.5,
                NoseBoneTwist: 0.0,
                ChimpBoneLength: 0.0,
                ChimpBoneLower: 0.0,
                AddBodyBlemish: -1,
                BodyBlemish: 0,
                NoseWidth: 0.0,
                Ageing: -1,
                LipsThickness: 0.2,
                NosePeakHeight: 0.0,
                CheeksBoneHigh: 0.0,
                CheeksBoneWidth: 0.0,
                EyesOpening: 0.0,
                NeckThickness: 0.3,
                CheeksWidth: -0.5,
                JawBoneBackLength: 0.7,
                Moles: 6,
                NoseBoneHigh: 0.0,
                NosePeakLower: 0.0,
            },
            hair: {
                HairSecondaryColor: 6,
                BeardColor: 3,
                HairColor: 3,
                EyebrowOpacity: 0.65,
                HairType: 79,
                BeardOpacity: 1.0,
                BeardType: 9,
                EyebrowType: 1,
                ChestHairColor: 2,
                EyebrowColor: 2,
                ChestHairType: 1,
                ChestHairOpacity: 0.8,
            },
            makeup: {
                LipstickOpacity: 1.0,
                LipstickType: -1,
                BlushColor: 0,
                FullMakeupDefaultColor: 1,
                FullMakeupOpacity: 1.0,
                FullMakeupType: -1,
                FullMakeupSecondaryColor: 0,
                FullMakeupPrimaryColor: 0,
                BlushType: -1,
                BlushOpacity: 1.0,
                LipstickColor: 0,
            },
            tattoos: [],
            invincible: true,
            freeze: true,
            blockevents: true,
            animDict: 'random@rescue_hostage',
            anim: 'girl_helping_girl_loop',
            flag: 1,
        });
    }

    private async createOjymasDevil() {
        await this.pedFactory.createPed({
            model: 'mp_m_freemode_01',
            coords: toVector4Object([2.11, 662.92, 202.57, 156.09]),
            modelCustomization: {
                SkinMix: 0.4,
                Hash: -1667301416,
                ShapeMix: 0.9,
                Mother: 21,
                Father: 6,
            },
            components: {
                1: [202, 0, 0],
                2: [21, 0, 0],
                3: [12, 1, 0],
                4: [102, 2, 0],
                5: [114, 0, 0],
                6: [51, 2, 0],
                7: [8, 0, 0],
                8: [0, 25, 0],
                10: [178, 0, 0],
                11: [284, 0, 0],
            },
            props: {},
            face: {
                CheeksBoneWidth: 0,
                JawBoneWidth: 0,
                JawBoneBackLength: 0,
                EyebrowForward: 0,
                BodyBlemish: -1,
                ChimpBoneWidth: 0,
                NoseWidth: 0,
                NosePeakLength: 0,
                NoseBoneHigh: 0,
                ChimpBoneLower: 0,
                Complexion: -1,
                NeckThickness: 0,
                CheeksWidth: 0,
                NosePeakHeight: 0,
                NosePeakLower: 0,
                NoseBoneTwist: 0,
                CheeksBoneHigh: 0,
                Ageing: -1,
                AddBodyBlemish: -1,
                EyesOpening: 0,
                ChimpHole: 0,
                ChimpBoneLength: 0,
                Moles: -1,
                LipsThickness: -0.3,
                EyebrowHigh: 0,
                EyeColor: 17,
                Blemish: -1,
            },
            hair: {
                BeardOpacity: 1,
                EyebrowOpacity: 1,
                BeardType: -1,
                ChestHairType: -1,
                BeardColor: 0,
                EyebrowColor: 8,
                HairColor: 61,
                ChestHairColor: 0,
                HairType: 106,
                EyebrowType: 1,
                ChestHairOpacity: 1,
                HairSecondaryColor: 54,
            },
            makeup: {
                LipstickOpacity: 0.7,
                BlushOpacity: 0.4,
                FullMakeupType: 1,
                FullMakeupDefaultColor: 1,
                FullMakeupOpacity: 1,
                FullMakeupPrimaryColor: 0,
                BlushType: 0,
                BlushColor: 6,
                LipstickType: 0,
                FullMakeupSecondaryColor: 0,
                LipstickColor: 2,
            },
            tattoos: [],
            invincible: true,
            freeze: true,
            blockevents: true,
            animDict: 'amb@world_human_stand_fishing@idle_a',
            anim: 'idle_a',
            flag: 1,
            animprops: [
                {
                    bone: 18905,
                    model: 'soz_prop_fishing_rod_11',
                    position: [0.1, 0.05, 0.0001],
                    rotation: [80.0, -120.0, 160.0],
                },
            ],
        });
    }

    private async spawnProps() {
        const obects: WorldObject[] = [];
        let index = 0;
        for (const prop of devilshopprops) {
            obects.push({
                id: 'devil_shop' + index++,
                model: GetHashKey(prop[0]),
                position: prop[1],
                matrix: prop[2],
                noCollision: !prop[3],
            });
        }
        this.objectProvider.createObjects(obects);
    }
}
