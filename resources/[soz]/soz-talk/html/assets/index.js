var W=Object.defineProperty,G=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var P=(e,i,r)=>i in e?W(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r,_=(e,i)=>{for(var r in i||(i={}))U.call(i,r)&&P(e,r,i[r]);if(M)for(var r of M(i))X.call(i,r)&&P(e,r,i[r]);return e},l=(e,i)=>G(e,Q(i));import{j as N,r as d,u as Y,C as E,N as I,c as Z,R as ee}from"./vendor.js";const ne=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))y(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const v of n.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&y(v)}).observe(document,{childList:!0,subtree:!0});function r(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function y(a){if(a.ep)return;a.ep=!0;const n=r(a);fetch(a.href,n)}};ne();var oe="/html/assets/radio-sr.png",te="/html/assets/radio-lr.png";const ae="_container_1uio1_1",ce="_container_show_1uio1_8",ie="_container_hide_1uio1_12",re="_radio_1uio1_16",se="_screen_1uio1_22",_e="_actions_1uio1_32",le="_action_style_1uio1_36",de="_action_enable_1uio1_47 _action_style_1uio1_36",ue="_action_validate_1uio1_55 _action_style_1uio1_36",ye="_action_mix_1uio1_63 _action_style_1uio1_36",me="_action_close_1uio1_71",fe="_action_volume_up_1uio1_84 _action_style_1uio1_36",pe="_action_volume_down_1uio1_92 _action_style_1uio1_36",he="_action_freq_primary_1uio1_101 _action_style_1uio1_36",ve="_action_freq_secondary_1uio1_109 _action_style_1uio1_36";var qe={container:ae,container_show:ce,container_hide:ie,radio:re,screen:se,actions:_e,action_style:le,action_enable:de,action_validate:ue,action_mix:ye,action_close:me,action_volume_up:fe,action_volume_down:pe,action_freq_primary:he,action_freq_secondary:ve};const ge="_container_19dzc_1",xe="_container_show_19dzc_8",we="_container_hide_19dzc_12",be="_radio_19dzc_16",$e="_screen_19dzc_22",ze="_actions_19dzc_38",Ce="_action_style_19dzc_42",ke="_action_enable_19dzc_53 _action_style_19dzc_42",Fe="_action_validate_19dzc_61 _action_style_19dzc_42",Ne="_action_mix_19dzc_69 _action_style_19dzc_42",Se="_action_close_19dzc_77",Le="_action_volume_up_19dzc_90 _action_style_19dzc_42",Re="_action_volume_down_19dzc_98 _action_style_19dzc_42",Ae="_action_freq_primary_19dzc_107 _action_style_19dzc_42",Be="_action_freq_secondary_19dzc_115 _action_style_19dzc_42";var je={container:ge,container_show:xe,container_hide:we,radio:be,screen:$e,actions:ze,action_style:Ce,action_enable:ke,action_validate:Fe,action_mix:Ne,action_close:Se,action_volume_up:Le,action_volume_down:Re,action_freq_primary:Ae,action_freq_secondary:Be};const Me="_screen_1xhmt_1",Pe="_enabled_1xhmt_10",Ee="_frequency_1xhmt_14",Ie="_meta_1xhmt_37";var z={screen:Me,enabled:Pe,frequency:Ee,meta:Ie},x=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(x||{});const Oe="https://soz-talk";function b(e,i={},r){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Oe}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(y=>{y.ok&&y.json().then(a=>{a==="ok"&&r()})}).catch(y=>console.error(y))}const o=N.exports.jsx,w=N.exports.jsxs,V=N.exports.Fragment,Ve=e=>o("svg",l(_({},e),{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})),Te=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),O=e=>{const[i,r]=d.exports.useState(!1),[y,a]=d.exports.useState(!1),[n,v]=d.exports.useState("primary"),[q,f]=d.exports.useState({frequency:0,volume:100,ear:x.Both}),[g,p]=d.exports.useState({frequency:0,volume:100,ear:x.Both}),{control:S,handleSubmit:T,formState:{errors:He},setValue:$}=Y(),D=e.type==="radio"?oe:te,u=e.type==="radio"?qe:je,H=d.exports.useCallback(()=>{b(`/${e.type}/enable`,{state:!y},()=>{a(t=>!t)})},[y,a]),L=d.exports.useCallback(t=>{v(t)},[v]);d.exports.useCallback(()=>{const t=n==="primary"?q.ear:g.ear;let s=x[t+1]!==void 0?t+1:0;b(`/${e.type}/change_ear`,{[n]:s},()=>{n==="primary"?f(c=>l(_({},c),{ear:s})):p(c=>l(_({},c),{ear:s}))})},[n,q,g,f,p]);const R=d.exports.useCallback(t=>{t>=0&&t<=100&&b(`/${e.type}/change_volume`,{[n]:t},()=>{n==="primary"?f(s=>l(_({},s),{volume:t})):p(s=>l(_({},s),{volume:t}))})},[n,f,p]),K=d.exports.useCallback(t=>{const s=n==="primary"?t.primaryFrequency:t.secondaryFrequency,c=parseInt(s.toString().replace(/\./g,""));c>=1e4&&c<=99999&&b(`/${e.type}/change_frequency`,{[n]:c},()=>{n==="primary"?f(h=>l(_({},h),{frequency:c})):p(h=>l(_({},h),{frequency:c}))})},[n,q,g]),J=d.exports.useCallback(()=>{b(`/${e.type}/toggle`,{state:!1},()=>{r(!1)})},[r]),A=d.exports.useCallback(t=>{const{type:s,action:c,frequency:h,volume:C,ear:k,isPrimary:F,isEnabled:j}=t.data;s===e.type&&(c==="reset"?(r(!1),a(!1),v("primary"),f({frequency:0,volume:100,ear:x.Both}),p({frequency:0,volume:100,ear:x.Both}),$("primaryFrequency",null),$("secondaryFrequency",null)):c==="open"?r(!0):c==="close"?r(!1):c==="enabled"?j!==void 0&&a(j):c==="frequency_change"?h&&(F?(f(m=>l(_({},m),{frequency:h/100})),$("primaryFrequency",h)):(p(m=>l(_({},m),{frequency:h/100})),$("secondaryFrequency",h))):c==="volume_change"?C&&(F?f(m=>l(_({},m),{volume:C})):p(m=>l(_({},m),{volume:C}))):c==="ear_change"&&k&&(F?f(m=>l(_({},m),{ear:k})):p(m=>l(_({},m),{ear:k}))))},[]),B=d.exports.useCallback(t=>{t.key==="Tab"&&t.preventDefault()},[]);return d.exports.useEffect(()=>(window.addEventListener("message",A),window.addEventListener("keydown",B),()=>{window.removeEventListener("message",A),window.removeEventListener("keydown",B)}),[]),o("div",{className:`${u.container} ${i?u.container_show:u.container_hide}`,children:w("form",{onSubmit:T(K),children:[o("img",{className:u.radio,src:D,alt:"Radio"}),o("div",{className:u.screen,children:o("div",{className:`${z.screen} ${y?z.enabled:""}`,children:y&&w(V,{children:[w("div",{className:z.frequency,children:[o("span",{children:n==="primary"?"F1":"F2"}),n==="primary"&&o(E,{control:S,name:"primaryFrequency",render:({field:{onChange:t,name:s,value:c}})=>o(I,{format:"###.##",defaultValue:"000.00",name:s,value:c,onChange:t})}),n==="secondary"&&o(E,{control:S,name:"secondaryFrequency",render:({field:{onChange:t,name:s,value:c}})=>o(I,{format:"###.##",defaultValue:"000.00",name:s,value:c,onChange:t})})]}),o("span",{className:z.meta,children:w("div",{children:[o(Te,{}),n==="primary"?q.volume:g.volume,"%"]})})]})})}),w("div",{className:u.actions,children:[o("input",{type:"submit",value:"",className:u.action_validate}),o("div",{className:u.action_enable,onClick:H}),o(Ve,{className:u.action_close,onClick:J}),o("div",{className:u.action_volume_up,onClick:()=>R(n==="primary"?q.volume+10:g.volume+10)}),o("div",{className:u.action_volume_down,onClick:()=>R(n==="primary"?q.volume-10:g.volume-10)}),o("div",{className:u.action_freq_primary,onClick:()=>L("primary")}),o("div",{className:u.action_freq_secondary,onClick:()=>L("secondary")})]})]})})},De=()=>w(V,{children:[o(O,{type:"radio"}),o(O,{type:"cibi"})]});Z.createRoot(document.getElementById("app")).render(o(ee.StrictMode,{children:o(De,{})}));
