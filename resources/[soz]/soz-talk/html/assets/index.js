var E=Object.defineProperty,F=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var j=(e,n,a)=>n in e?E(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,f=(e,n)=>{for(var a in n||(n={}))T.call(n,a)&&j(e,a,n[a]);if(S)for(var a of S(n))D.call(n,a)&&j(e,a,n[a]);return e},y=(e,n)=>F(e,H(n));import{j as J,a as K,F as G,A as g,l as k,y as Q,S as U}from"./vendor.js";const W=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))_(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const h of t.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&_(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function _(o){if(o.ep)return;o.ep=!0;const t=a(o);fetch(o.href,t)}};W();var X="/html/assets/radio-sr.png",Y="/html/assets/radio-lr.png";const Z="_container_we8kz_1",ee="_container_show_we8kz_8",ne="_container_hide_we8kz_12",te="_radio_we8kz_16",oe="_screen_we8kz_22",ae="_actions_we8kz_32",ce="_action_style_we8kz_36",ie="_action_enable_we8kz_47 _action_style_we8kz_36",_e="_action_validate_we8kz_55 _action_style_we8kz_36",re="_action_mix_we8kz_63 _action_style_we8kz_36",se="_action_volume_up_we8kz_72 _action_style_we8kz_36",le="_action_volume_down_we8kz_80 _action_style_we8kz_36",de="_action_freq_primary_we8kz_89 _action_style_we8kz_36",fe="_action_freq_secondary_we8kz_97 _action_style_we8kz_36";var ye={container:Z,container_show:ee,container_hide:ne,radio:te,screen:oe,actions:ae,action_style:ce,action_enable:ie,action_validate:_e,action_mix:re,action_volume_up:se,action_volume_down:le,action_freq_primary:de,action_freq_secondary:fe};const ue="_container_17p6l_1",me="_container_show_17p6l_8",pe="_container_hide_17p6l_12",he="_radio_17p6l_16",ve="_screen_17p6l_22",we="_actions_17p6l_38",ge="_action_style_17p6l_42",qe="_action_enable_17p6l_53 _action_style_17p6l_42",ke="_action_validate_17p6l_61 _action_style_17p6l_42",$e="_action_volume_up_17p6l_70 _action_style_17p6l_42",ze="_action_volume_down_17p6l_78 _action_style_17p6l_42",Ce="_action_freq_primary_17p6l_87 _action_style_17p6l_42",be="_action_freq_secondary_17p6l_95 _action_style_17p6l_42";var xe={container:ue,container_show:me,container_hide:pe,radio:he,screen:ve,actions:we,action_style:ge,action_enable:qe,action_validate:ke,action_volume_up:$e,action_volume_down:ze,action_freq_primary:Ce,action_freq_secondary:be},q=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(q||{});const Le="_screen_1cqr1_1",Ae="_enabled_1cqr1_19",Be="_frequency_1cqr1_27",Re="_meta_1cqr1_73";var $={screen:Le,enabled:Ae,frequency:Be,meta:Re};const c=J,v=K,N=G,Se=()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:c("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),je=()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:c("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),Me=({enabled:e,currentFrequency:n,primaryFrequency:a,setPrimaryFrequency:_,secondaryFrequency:o,setSecondaryFrequency:t})=>{const h=g(s=>{let l=n==="primary"?a.frequency:o.frequency;/^[0-9]{3}\.[0-9]$/.test(s.target.value)&&(l=parseFloat(s.target.value)),n==="primary"?_(d=>y(f({},d),{frequency:l})):t(d=>y(f({},d),{frequency:l}))},[n,_,t]),u=s=>{switch(s){case q.Left:return"L";case q.Both:return"L/R";case q.Right:return"R"}};return c("div",{class:`${$.screen} ${e?$.enabled:""}`,children:e&&v(N,{children:[v("div",{className:$.frequency,children:[c("span",{children:n==="primary"?"F1":"F2"}),c("input",{type:"text",maxLength:5,value:(n==="primary"?a.frequency:o.frequency).toFixed(1),onChange:h})]}),v("span",{className:$.meta,children:[v("div",{children:[c(Se,{}),n==="primary"?a.volume:o.volume,"%"]}),v("div",{children:[c(je,{}),u(n==="primary"?a.ear:o.ear)]})]})]})})},Ne="https://soz-talk";function z(e,n={},a){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Ne}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(_=>{_.ok&&_.json().then(o=>{o==="ok"&&a()})}).catch(_=>console.error(_))}const M=e=>{const[n,a]=k(!1),[_,o]=k(!1),[t,h]=k("primary"),[u,s]=k({frequency:0,volume:100,ear:q.Both}),[l,d]=k({frequency:0,volume:100,ear:q.Both}),O=e.type==="radio"?X:Y,r=e.type==="radio"?ye:xe,P=g(()=>{z(`/${e.type}/enable`,{state:!_},()=>{o(i=>!i)})},[_,o]),x=g(i=>{h(i)},[h]),I=g(()=>{const i=t==="primary"?u.ear:l.ear;let m=q[i+1]!==void 0?i+1:0;z(`/${e.type}/change_ear`,{[t]:m},()=>{t==="primary"?s(p=>y(f({},p),{ear:m})):d(p=>y(f({},p),{ear:m}))})},[t,u,l,s,d]),L=g(i=>{i>=0&&i<=100&&z(`/${e.type}/change_volume`,{[t]:i},()=>{t==="primary"?s(m=>y(f({},m),{volume:i})):d(m=>y(f({},m),{volume:i}))})},[t,s,d]),V=g(()=>{const i=(t==="primary"?u.frequency:l.frequency)*10;i>=1e3&&i<=9999&&z(`/${e.type}/change_frequency`,{[t]:i},()=>{})},[t,u,l]),A=g(i=>{const{type:m,action:p,frequency:C,volume:b,isPrimary:B,isEnabled:R}=i.data;m===e.type&&(p==="open"?a(!0):p==="close"?a(!1):p==="enabled"?R!==void 0&&o(R):p==="frequency_change"?C&&(B?s(w=>y(f({},w),{frequency:C/10})):d(w=>y(f({},w),{frequency:C/10}))):p==="volume_change"&&b&&(B?s(w=>y(f({},w),{volume:b})):d(w=>y(f({},w),{volume:b}))))},[]);return Q(()=>(window.addEventListener("message",A),()=>{window.removeEventListener("message",A)}),[]),v("div",{class:`${r.container} ${n?r.container_show:r.container_hide}`,children:[c("img",{class:r.radio,src:O,alt:"Radio"}),c("div",{class:r.screen,children:c(Me,{enabled:_,currentFrequency:t,primaryFrequency:u,setPrimaryFrequency:s,secondaryFrequency:l,setSecondaryFrequency:d})}),v("div",{class:r.actions,children:[c("div",{class:r.action_enable,onClick:P}),c("div",{class:r.action_validate,onClick:V}),c("div",{class:r.action_mix,onClick:I}),c("div",{class:r.action_volume_up,onClick:()=>L(t==="primary"?u.volume+10:l.volume+10)}),c("div",{class:r.action_volume_down,onClick:()=>L(t==="primary"?u.volume-10:l.volume-10)}),c("div",{class:r.action_freq_primary,onClick:()=>x("primary")}),c("div",{class:r.action_freq_secondary,onClick:()=>x("secondary")})]})]})},Oe=()=>v(N,{children:[c(M,{type:"radio"}),c(M,{type:"cibi"})]});U(c(Oe,{}),document.getElementById("app"));
