var Q=Object.defineProperty,U=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var M=(e,r,i)=>r in e?Q(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i,l=(e,r)=>{for(var i in r||(r={}))Y.call(r,i)&&M(e,i,r[i]);if(E)for(var i of E(r))Z.call(r,i)&&M(e,i,r[i]);return e},d=(e,r)=>U(e,X(r));import{j as N,r as u,u as ee,C as I,N as P,c as ne,R as oe}from"./vendor.js";const te=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))y(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const x of n.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&y(x)}).observe(document,{childList:!0,subtree:!0});function i(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerpolicy&&(n.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?n.credentials="include":c.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function y(c){if(c.ep)return;c.ep=!0;const n=i(c);fetch(c.href,n)}};te();var ce="/html/assets/radio-sr.png",ae="/html/assets/radio-lr.png";const re="_container_1uio1_1",ie="_container_show_1uio1_8",se="_container_hide_1uio1_12",_e="_radio_1uio1_16",le="_screen_1uio1_22",de="_actions_1uio1_32",ue="_action_style_1uio1_36",ye="_action_enable_1uio1_47 _action_style_1uio1_36",me="_action_validate_1uio1_55 _action_style_1uio1_36",fe="_action_mix_1uio1_63 _action_style_1uio1_36",pe="_action_close_1uio1_71",he="_action_volume_up_1uio1_84 _action_style_1uio1_36",ve="_action_volume_down_1uio1_92 _action_style_1uio1_36",ge="_action_freq_primary_1uio1_101 _action_style_1uio1_36",qe="_action_freq_secondary_1uio1_109 _action_style_1uio1_36";var we={container:re,container_show:ie,container_hide:se,radio:_e,screen:le,actions:de,action_style:ue,action_enable:ye,action_validate:me,action_mix:fe,action_close:pe,action_volume_up:he,action_volume_down:ve,action_freq_primary:ge,action_freq_secondary:qe};const xe="_container_19dzc_1",be="_container_show_19dzc_8",Ce="_container_hide_19dzc_12",$e="_radio_19dzc_16",ze="_screen_19dzc_22",ke="_actions_19dzc_38",Fe="_action_style_19dzc_42",Ne="_action_enable_19dzc_53 _action_style_19dzc_42",Se="_action_validate_19dzc_61 _action_style_19dzc_42",Le="_action_mix_19dzc_69 _action_style_19dzc_42",Re="_action_close_19dzc_77",Be="_action_volume_up_19dzc_90 _action_style_19dzc_42",Ae="_action_volume_down_19dzc_98 _action_style_19dzc_42",je="_action_freq_primary_19dzc_107 _action_style_19dzc_42",Ee="_action_freq_secondary_19dzc_115 _action_style_19dzc_42";var Me={container:xe,container_show:be,container_hide:Ce,radio:$e,screen:ze,actions:ke,action_style:Fe,action_enable:Ne,action_validate:Se,action_mix:Le,action_close:Re,action_volume_up:Be,action_volume_down:Ae,action_freq_primary:je,action_freq_secondary:Ee};const Ie="_screen_1xhmt_1",Pe="_enabled_1xhmt_10",Ve="_frequency_1xhmt_14",Oe="_meta_1xhmt_37";var $={screen:Ie,enabled:Pe,frequency:Ve,meta:Oe},v=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(v||{});const Te="https://soz-talk";function C(e,r={},i){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Te}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(y=>{y.ok&&y.json().then(c=>{c==="ok"&&i()})}).catch(y=>console.error(y))}const o=N.exports.jsx,w=N.exports.jsxs,T=N.exports.Fragment,De=e=>o("svg",d(l({},e),{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})),He=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),Ke=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:o("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),V=e=>{switch(e){case v.Left:return"L";case v.Both:return"L/R";case v.Right:return"R"}},O=e=>{const[r,i]=u.exports.useState(!1),[y,c]=u.exports.useState(!1),[n,x]=u.exports.useState("primary"),[g,f]=u.exports.useState({frequency:0,volume:100,ear:v.Both}),[q,p]=u.exports.useState({frequency:0,volume:100,ear:v.Both}),{control:S,handleSubmit:D,formState:{errors:We},setValue:b}=ee(),H=e.type==="radio"?ce:ae,_=e.type==="radio"?we:Me,K=u.exports.useCallback(()=>{C(`/${e.type}/enable`,{state:!y},()=>{c(t=>!t)})},[y,c]),L=u.exports.useCallback(t=>{x(t)},[x]),J=u.exports.useCallback(()=>{const t=n==="primary"?g.ear:q.ear;let s=v[t+1]!==void 0?t+1:0;C(`/${e.type}/change_ear`,{[n]:s},()=>{n==="primary"?f(a=>d(l({},a),{ear:s})):p(a=>d(l({},a),{ear:s}))})},[n,g,q,f,p]),R=u.exports.useCallback(t=>{t>=0&&t<=100&&C(`/${e.type}/change_volume`,{[n]:t},()=>{n==="primary"?f(s=>d(l({},s),{volume:t})):p(s=>d(l({},s),{volume:t}))})},[n,f,p]),W=u.exports.useCallback(t=>{const s=n==="primary"?t.primaryFrequency:t.secondaryFrequency,a=parseInt(s.toString().replace(/\./g,""));a>=1e4&&a<=99999?C(`/${e.type}/change_frequency`,{[n]:a},()=>{n==="primary"?f(h=>d(l({},h),{frequency:a})):p(h=>d(l({},h),{frequency:a}))}):n==="primary"?b("primaryFrequency",g.frequency.toString().replace(/\./g,"").padEnd(5,"0")):b("secondaryFrequency",q.frequency.toString().replace(/\./g,"").padEnd(5,"0"))},[n,g,q]),G=u.exports.useCallback(()=>{C(`/${e.type}/toggle`,{state:!1},()=>{i(!1)})},[i]),B=u.exports.useCallback(t=>{const{type:s,action:a,frequency:h,volume:z,ear:k,isPrimary:F,isEnabled:j}=t.data;s===e.type&&(a==="reset"?(i(!1),c(!1),x("primary"),f({frequency:0,volume:100,ear:v.Both}),p({frequency:0,volume:100,ear:v.Both}),b("primaryFrequency","00000"),b("secondaryFrequency","00000")):a==="open"?i(!0):a==="close"?i(!1):a==="enabled"?j!==void 0&&c(j):a==="frequency_change"?h&&(F?(f(m=>d(l({},m),{frequency:h/100})),b("primaryFrequency",h)):(p(m=>d(l({},m),{frequency:h/100})),b("secondaryFrequency",h))):a==="volume_change"?z&&(F?f(m=>d(l({},m),{volume:z})):p(m=>d(l({},m),{volume:z}))):a==="ear_change"&&k&&(F?f(m=>d(l({},m),{ear:k})):p(m=>d(l({},m),{ear:k}))))},[]),A=u.exports.useCallback(t=>{t.key==="Tab"&&t.preventDefault()},[]);return u.exports.useEffect(()=>(window.addEventListener("message",B),window.addEventListener("keydown",A),()=>{window.removeEventListener("message",B),window.removeEventListener("keydown",A)}),[]),o("div",{className:`${_.container} ${r?_.container_show:_.container_hide}`,children:w("form",{onSubmit:D(W),children:[o("img",{className:_.radio,src:H,alt:"Radio"}),o("div",{className:_.screen,children:o("div",{className:`${$.screen} ${y?$.enabled:""}`,children:y&&w(T,{children:[w("div",{className:$.frequency,children:[o("span",{children:n==="primary"?"F1":"F2"}),n==="primary"&&o(I,{control:S,name:"primaryFrequency",render:({field:{onChange:t,name:s,value:a}})=>o(P,{format:"###.##",defaultValue:"000.00",name:s,value:a,onChange:t})}),n==="secondary"&&o(I,{control:S,name:"secondaryFrequency",render:({field:{onChange:t,name:s,value:a}})=>o(P,{format:"###.##",defaultValue:"000.00",name:s,value:a,onChange:t})})]}),w("span",{className:$.meta,children:[w("div",{children:[o(He,{}),n==="primary"?g.volume:q.volume,"%"]}),w("div",{children:[o(Ke,{}),V(n==="primary"?g.ear:q.ear)]})]})]})})}),w("div",{className:_.actions,children:[o("input",{type:"submit",value:"",className:_.action_validate}),o("div",{className:_.action_enable,onClick:K}),o("div",{className:_.action_mix,onClick:J}),o(De,{className:_.action_close,onClick:G}),o("div",{className:_.action_volume_up,onClick:()=>R(n==="primary"?g.volume+10:q.volume+10)}),o("div",{className:_.action_volume_down,onClick:()=>R(n==="primary"?g.volume-10:q.volume-10)}),o("div",{className:_.action_freq_primary,onClick:()=>L("primary")}),o("div",{className:_.action_freq_secondary,onClick:()=>L("secondary")})]})]})})},Je=()=>w(T,{children:[o(O,{type:"radio"}),o(O,{type:"cibi"})]});ne.createRoot(document.getElementById("app")).render(o(oe.StrictMode,{children:o(Je,{})}));
