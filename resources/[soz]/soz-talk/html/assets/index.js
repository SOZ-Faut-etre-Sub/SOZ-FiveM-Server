var G=Object.defineProperty,Q=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var M=(e,a,r)=>a in e?G(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,l=(e,a)=>{for(var r in a||(a={}))X.call(a,r)&&M(e,r,a[r]);if(j)for(var r of j(a))Y.call(a,r)&&M(e,r,a[r]);return e},d=(e,a)=>Q(e,U(a));import{j as F,r as u,u as Z,C as I,N as P,c as ee,R as ne}from"./vendor.js";const oe=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const w of n.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&m(w)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function m(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}};oe();var te="/html/assets/radio-sr.png",ce="/html/assets/radio-lr.png";const ae="_container_1uio1_1",ie="_container_show_1uio1_8",re="_container_hide_1uio1_12",se="_radio_1uio1_16",_e="_screen_1uio1_22",le="_actions_1uio1_32",de="_action_style_1uio1_36",ue="_action_enable_1uio1_47 _action_style_1uio1_36",me="_action_validate_1uio1_55 _action_style_1uio1_36",ye="_action_mix_1uio1_63 _action_style_1uio1_36",fe="_action_close_1uio1_71",pe="_action_volume_up_1uio1_84 _action_style_1uio1_36",he="_action_volume_down_1uio1_92 _action_style_1uio1_36",ve="_action_freq_primary_1uio1_101 _action_style_1uio1_36",ge="_action_freq_secondary_1uio1_109 _action_style_1uio1_36";var qe={container:ae,container_show:ie,container_hide:re,radio:se,screen:_e,actions:le,action_style:de,action_enable:ue,action_validate:me,action_mix:ye,action_close:fe,action_volume_up:pe,action_volume_down:he,action_freq_primary:ve,action_freq_secondary:ge};const xe="_container_19dzc_1",we="_container_show_19dzc_8",Ce="_container_hide_19dzc_12",be="_radio_19dzc_16",$e="_screen_19dzc_22",ze="_actions_19dzc_38",ke="_action_style_19dzc_42",Fe="_action_enable_19dzc_53 _action_style_19dzc_42",Ne="_action_validate_19dzc_61 _action_style_19dzc_42",Le="_action_mix_19dzc_69 _action_style_19dzc_42",Se="_action_close_19dzc_77",Re="_action_volume_up_19dzc_90 _action_style_19dzc_42",Ae="_action_volume_down_19dzc_98 _action_style_19dzc_42",Be="_action_freq_primary_19dzc_107 _action_style_19dzc_42",je="_action_freq_secondary_19dzc_115 _action_style_19dzc_42";var Me={container:xe,container_show:we,container_hide:Ce,radio:be,screen:$e,actions:ze,action_style:ke,action_enable:Fe,action_validate:Ne,action_mix:Le,action_close:Se,action_volume_up:Re,action_volume_down:Ae,action_freq_primary:Be,action_freq_secondary:je};const Ie="_screen_1xhmt_1",Pe="_enabled_1xhmt_10",Ve="_frequency_1xhmt_14",Oe="_meta_1xhmt_37";var b={screen:Ie,enabled:Pe,frequency:Ve,meta:Oe},x=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(x||{});const Ee="https://soz-talk";function C(e,a={},r){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Ee}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(m=>{m.ok&&m.json().then(t=>{t==="ok"&&r()})}).catch(m=>console.error(m))}const o=F.exports.jsx,v=F.exports.jsxs,E=F.exports.Fragment,He=e=>o("svg",d(l({},e),{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})),Te=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),De=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:o("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),V=e=>{switch(e){case x.Left:return"L";case x.Both:return"L/R";case x.Right:return"R"}},O=e=>{const[a,r]=u.exports.useState(!1),[m,t]=u.exports.useState(!1),[n,w]=u.exports.useState("primary"),[g,p]=u.exports.useState({frequency:0,volume:100,ear:x.Both}),[q,h]=u.exports.useState({frequency:0,volume:100,ear:x.Both}),{control:N,handleSubmit:H,formState:{errors:Ke},setValue:L}=Z(),T=e.type==="radio"?te:ce,_=e.type==="radio"?qe:Me,D=u.exports.useCallback(()=>{C(`/${e.type}/enable`,{state:!m},()=>{t(c=>!c)})},[m,t]),S=u.exports.useCallback(c=>{w(c)},[w]),J=u.exports.useCallback(()=>{const c=n==="primary"?g.ear:q.ear;let s=x[c+1]!==void 0?c+1:0;C(`/${e.type}/change_ear`,{[n]:s},()=>{n==="primary"?p(i=>d(l({},i),{ear:s})):h(i=>d(l({},i),{ear:s}))})},[n,g,q,p,h]),R=u.exports.useCallback(c=>{c>=0&&c<=100&&C(`/${e.type}/change_volume`,{[n]:c},()=>{n==="primary"?p(s=>d(l({},s),{volume:c})):h(s=>d(l({},s),{volume:c}))})},[n,p,h]),K=u.exports.useCallback(c=>{const s=n==="primary"?c.primaryFrequency:c.secondaryFrequency,i=parseInt(s.replace(/\./g,""));i>=1e4&&i<=99999&&C(`/${e.type}/change_frequency`,{[n]:i},()=>{n==="primary"?p(f=>d(l({},f),{frequency:i})):h(f=>d(l({},f),{frequency:i}))})},[n,g,q]),W=u.exports.useCallback(()=>{C(`/${e.type}/toggle`,{state:!1},()=>{r(!1)})},[r]),A=u.exports.useCallback(c=>{const{type:s,action:i,frequency:f,volume:$,ear:z,isPrimary:k,isEnabled:B}=c.data;s===e.type&&(i==="open"?r(!0):i==="close"?r(!1):i==="enabled"?B!==void 0&&t(B):i==="frequency_change"?f&&(k?(p(y=>d(l({},y),{frequency:f/100})),L("primaryFrequency",f)):(h(y=>d(l({},y),{frequency:f/100})),L("secondaryFrequency",f))):i==="volume_change"?$&&(k?p(y=>d(l({},y),{volume:$})):h(y=>d(l({},y),{volume:$}))):i==="ear_change"&&z&&(k?p(y=>d(l({},y),{ear:z})):h(y=>d(l({},y),{ear:z}))))},[]);return u.exports.useEffect(()=>(window.addEventListener("message",A),()=>{window.removeEventListener("message",A)}),[]),o("div",{className:`${_.container} ${a?_.container_show:_.container_hide}`,children:v("form",{onSubmit:H(K),children:[o("img",{className:_.radio,src:T,alt:"Radio"}),o("div",{className:_.screen,children:o("div",{className:`${b.screen} ${m?b.enabled:""}`,children:m&&v(E,{children:[v("div",{className:b.frequency,children:[o("span",{children:n==="primary"?"F1":"F2"}),n==="primary"&&o(I,{control:N,name:"primaryFrequency",render:({field:{onChange:c,name:s,value:i}})=>o(P,{format:"###.##",defaultValue:"000.00",name:s,value:i,onChange:c})}),n==="secondary"&&o(I,{control:N,name:"secondaryFrequency",render:({field:{onChange:c,name:s,value:i}})=>o(P,{format:"###.##",defaultValue:"000.00",name:s,value:i,onChange:c})})]}),v("span",{className:b.meta,children:[v("div",{children:[o(Te,{}),n==="primary"?g.volume:q.volume,"%"]}),v("div",{children:[o(De,{}),V(n==="primary"?g.ear:q.ear)]})]})]})})}),v("div",{className:_.actions,children:[o("input",{type:"submit",value:"",className:_.action_validate}),o("div",{className:_.action_enable,onClick:D}),o("div",{className:_.action_mix,onClick:J}),o(He,{className:_.action_close,onClick:W}),o("div",{className:_.action_volume_up,onClick:()=>R(n==="primary"?g.volume+10:q.volume+10)}),o("div",{className:_.action_volume_down,onClick:()=>R(n==="primary"?g.volume-10:q.volume-10)}),o("div",{className:_.action_freq_primary,onClick:()=>S("primary")}),o("div",{className:_.action_freq_secondary,onClick:()=>S("secondary")})]})]})})},Je=()=>v(E,{children:[o(O,{type:"radio"}),o(O,{type:"cibi"})]});ee.createRoot(document.getElementById("app")).render(o(ne.StrictMode,{children:o(Je,{})}));
