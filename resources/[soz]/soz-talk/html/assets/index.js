var T=Object.defineProperty,F=Object.defineProperties;var D=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var j=(e,t,c)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:c}):e[t]=c,_=(e,t)=>{for(var c in t||(t={}))J.call(t,c)&&j(e,c,t[c]);if(B)for(var c of B(t))K.call(t,c)&&j(e,c,t[c]);return e},l=(e,t)=>F(e,D(t));import{j as N,r as d,c as G,R as Q}from"./vendor.js";const U=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function c(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=c(n);fetch(n.href,o)}};U();var W="/html/assets/radio-sr.png",X="/html/assets/radio-lr.png";const Y="_container_1uio1_1",Z="_container_show_1uio1_8",ee="_container_hide_1uio1_12",te="_radio_1uio1_16",oe="_screen_1uio1_22",ne="_actions_1uio1_32",ae="_action_style_1uio1_36",ce="_action_enable_1uio1_47 _action_style_1uio1_36",ie="_action_validate_1uio1_55 _action_style_1uio1_36",se="_action_mix_1uio1_63 _action_style_1uio1_36",re="_action_close_1uio1_71",_e="_action_volume_up_1uio1_84 _action_style_1uio1_36",le="_action_volume_down_1uio1_92 _action_style_1uio1_36",de="_action_freq_primary_1uio1_101 _action_style_1uio1_36",ue="_action_freq_secondary_1uio1_109 _action_style_1uio1_36";var me={container:Y,container_show:Z,container_hide:ee,radio:te,screen:oe,actions:ne,action_style:ae,action_enable:ce,action_validate:ie,action_mix:se,action_close:re,action_volume_up:_e,action_volume_down:le,action_freq_primary:de,action_freq_secondary:ue};const fe="_container_19dzc_1",ye="_container_show_19dzc_8",he="_container_hide_19dzc_12",pe="_radio_19dzc_16",ve="_screen_19dzc_22",ge="_actions_19dzc_38",xe="_action_style_19dzc_42",we="_action_enable_19dzc_53 _action_style_19dzc_42",Ce="_action_validate_19dzc_61 _action_style_19dzc_42",qe="_action_mix_19dzc_69 _action_style_19dzc_42",be="_action_close_19dzc_77",$e="_action_volume_up_19dzc_90 _action_style_19dzc_42",ze="_action_volume_down_19dzc_98 _action_style_19dzc_42",ke="_action_freq_primary_19dzc_107 _action_style_19dzc_42",Ne="_action_freq_secondary_19dzc_115 _action_style_19dzc_42";var Le={container:fe,container_show:ye,container_hide:he,radio:pe,screen:ve,actions:ge,action_style:xe,action_enable:we,action_validate:Ce,action_mix:qe,action_close:be,action_volume_up:$e,action_volume_down:ze,action_freq_primary:ke,action_freq_secondary:Ne},w=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(w||{});const Se="_screen_1xhmt_1",Re="_enabled_1xhmt_10",Ae="_frequency_1xhmt_14",Be="_meta_1xhmt_37";var q={screen:Se,enabled:Re,frequency:Ae,meta:Be};const a=N.exports.jsx,x=N.exports.jsxs,I=N.exports.Fragment,je=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),Me=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:a("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),Ie=({enabled:e,currentFrequency:t,primaryFrequency:c,setPrimaryFrequency:s,secondaryFrequency:n,setSecondaryFrequency:o})=>{const g=d.exports.useCallback(u=>{let f=t==="primary"?c.frequency:n.frequency;/^[0-9]{3}\.[0-9]{2}$/.test(u.target.value)&&(f=parseFloat(u.target.value)),t==="primary"?s(m=>l(_({},m),{frequency:f})):o(m=>l(_({},m),{frequency:f}))},[t,s,o]),h=u=>{switch(u){case w.Left:return"L";case w.Both:return"L/R";case w.Right:return"R"}};return a("div",{className:`${q.screen} ${e?q.enabled:""}`,children:e&&x(I,{children:[x("div",{className:q.frequency,children:[a("span",{children:t==="primary"?"F1":"F2"}),a("input",{type:"text",maxLength:6,value:(t==="primary"?c.frequency:n.frequency).toFixed(2),onChange:g})]}),x("span",{className:q.meta,children:[x("div",{children:[a(je,{}),t==="primary"?c.volume:n.volume,"%"]}),x("div",{children:[a(Me,{}),h(t==="primary"?c.ear:n.ear)]})]})]})})},Oe="https://soz-talk";function C(e,t={},c){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Oe}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(s=>{s.ok&&s.json().then(n=>{n==="ok"&&c()})}).catch(s=>console.error(s))}const Pe=e=>a("svg",l(_({},e),{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})})),M=e=>{const[t,c]=d.exports.useState(!1),[s,n]=d.exports.useState(!1),[o,g]=d.exports.useState("primary"),[h,u]=d.exports.useState({frequency:0,volume:100,ear:w.Both}),[f,m]=d.exports.useState({frequency:0,volume:100,ear:w.Both}),O=e.type==="radio"?W:X,r=e.type==="radio"?me:Le,P=d.exports.useCallback(()=>{C(`/${e.type}/enable`,{state:!s},()=>{n(i=>!i)})},[s,n]),L=d.exports.useCallback(i=>{g(i)},[g]),E=d.exports.useCallback(()=>{const i=o==="primary"?h.ear:f.ear;let v=w[i+1]!==void 0?i+1:0;C(`/${e.type}/change_ear`,{[o]:v},()=>{o==="primary"?u(p=>l(_({},p),{ear:v})):m(p=>l(_({},p),{ear:v}))})},[o,h,f,u,m]),S=d.exports.useCallback(i=>{i>=0&&i<=100&&C(`/${e.type}/change_volume`,{[o]:i},()=>{o==="primary"?u(v=>l(_({},v),{volume:i})):m(v=>l(_({},v),{volume:i}))})},[o,u,m]),V=d.exports.useCallback(()=>{const i=(o==="primary"?h.frequency:f.frequency)*100;i>=1e4&&i<=99999&&C(`/${e.type}/change_frequency`,{[o]:i},()=>{})},[o,h,f]),H=d.exports.useCallback(()=>{C(`/${e.type}/toggle`,{state:!1},()=>{c(!1)})},[c]),R=d.exports.useCallback(i=>{const{type:v,action:p,frequency:b,volume:$,ear:z,isPrimary:k,isEnabled:A}=i.data;v===e.type&&(p==="open"?c(!0):p==="close"?c(!1):p==="enabled"?A!==void 0&&n(A):p==="frequency_change"?b&&(k?u(y=>l(_({},y),{frequency:b/100})):m(y=>l(_({},y),{frequency:b/100}))):p==="volume_change"?$&&(k?u(y=>l(_({},y),{volume:$})):m(y=>l(_({},y),{volume:$}))):p==="ear_change"&&z&&(k?u(y=>l(_({},y),{ear:z})):m(y=>l(_({},y),{ear:z}))))},[]);return d.exports.useEffect(()=>(window.addEventListener("message",R),()=>{window.removeEventListener("message",R)}),[]),x("div",{className:`${r.container} ${t?r.container_show:r.container_hide}`,children:[a("img",{className:r.radio,src:O,alt:"Radio"}),a("div",{className:r.screen,children:a(Ie,{enabled:s,currentFrequency:o,primaryFrequency:h,setPrimaryFrequency:u,secondaryFrequency:f,setSecondaryFrequency:m})}),x("div",{className:r.actions,children:[a("div",{className:r.action_enable,onClick:P}),a("div",{className:r.action_validate,onClick:V}),a("div",{className:r.action_mix,onClick:E}),a(Pe,{className:r.action_close,onClick:H}),a("div",{className:r.action_volume_up,onClick:()=>S(o==="primary"?h.volume+10:f.volume+10)}),a("div",{className:r.action_volume_down,onClick:()=>S(o==="primary"?h.volume-10:f.volume-10)}),a("div",{className:r.action_freq_primary,onClick:()=>L("primary")}),a("div",{className:r.action_freq_secondary,onClick:()=>L("secondary")})]})]})},Ee=()=>x(I,{children:[a(M,{type:"radio"}),a(M,{type:"cibi"})]});G.createRoot(document.getElementById("app")).render(a(Q.StrictMode,{children:a(Ee,{})}));
