var F=Object.defineProperty,H=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var M=(e,n,a)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,y=(e,n)=>{for(var a in n||(n={}))D.call(n,a)&&M(e,a,n[a]);if(j)for(var a of j(n))J.call(n,a)&&M(e,a,n[a]);return e},f=(e,n)=>H(e,T(n));import{j as K,a as G,F as Q,A as p,l as $,y as U,S as W}from"./vendor.33e6ab9e.js";const X=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))_(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const v of o.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&_(v)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function _(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}};X();var Y="/html/assets/radio-sr.3c80ed87.png",Z="/html/assets/radio-lr.9f17f379.png";const ee="_container_1a9oy_1",ne="_container_show_1a9oy_8",oe="_container_hide_1a9oy_12",te="_radio_1a9oy_16",ae="_screen_1a9oy_22",ce="_actions_1a9oy_32",ie="_action_style_1a9oy_36",_e="_action_enable_1a9oy_47 _action_style_1a9oy_36",se="_action_close_1a9oy_55",re="_action_validate_1a9oy_72 _action_style_1a9oy_36",le="_action_mix_1a9oy_80 _action_style_1a9oy_36",de="_action_volume_up_1a9oy_89 _action_style_1a9oy_36",ye="_action_volume_down_1a9oy_97 _action_style_1a9oy_36",fe="_action_freq_primary_1a9oy_106 _action_style_1a9oy_36",he="_action_freq_secondary_1a9oy_114 _action_style_1a9oy_36";var ue={container:ee,container_show:ne,container_hide:oe,radio:te,screen:ae,actions:ce,action_style:ie,action_enable:_e,action_close:se,action_validate:re,action_mix:le,action_volume_up:de,action_volume_down:ye,action_freq_primary:fe,action_freq_secondary:he};const me="_container_1xhe8_1",ve="_container_show_1xhe8_8",pe="_container_hide_1xhe8_12",ge="_radio_1xhe8_16",xe="_screen_1xhe8_22",qe="_actions_1xhe8_38",$e="_action_style_1xhe8_42",we="_action_enable_1xhe8_53 _action_style_1xhe8_42",Ce="_action_close_1xhe8_61",be="_action_validate_1xhe8_78 _action_style_1xhe8_42",Le="_action_volume_up_1xhe8_87 _action_style_1xhe8_42",Ae="_action_volume_down_1xhe8_95 _action_style_1xhe8_42",ke="_action_freq_primary_1xhe8_104 _action_style_1xhe8_42",Be="_action_freq_secondary_1xhe8_112 _action_style_1xhe8_42";var Re={container:me,container_show:ve,container_hide:pe,radio:ge,screen:xe,actions:qe,action_style:$e,action_enable:we,action_close:Ce,action_validate:be,action_volume_up:Le,action_volume_down:Ae,action_freq_primary:ke,action_freq_secondary:Be},q=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(q||{});const Se="_screen_1cqr1_1",je="_enabled_1cqr1_19",Me="_frequency_1cqr1_27",Ne="_meta_1cqr1_73";var C={screen:Se,enabled:je,frequency:Me,meta:Ne};const c=K,g=G,O=Q,Oe=()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:c("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),Pe=()=>c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:c("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),ze=({enabled:e,currentFrequency:n,primaryFrequency:a,setPrimaryFrequency:_,secondaryFrequency:t,setSecondaryFrequency:o})=>{const v=p(r=>{let l=n==="primary"?a.frequency:t.frequency;/^[0-9]{3}\.[0-9]$/.test(r.target.value)&&(l=parseFloat(r.target.value)),n==="primary"?_(d=>f(y({},d),{frequency:l})):o(d=>f(y({},d),{frequency:l}))},[n,_,o]),h=r=>{switch(r){case q.Left:return"L";case q.Both:return"L/R";case q.Right:return"R"}};return c("div",{class:`${C.screen} ${e?C.enabled:""}`,children:e&&g(O,{children:[g("div",{className:C.frequency,children:[c("span",{children:n==="primary"?"F1":"F2"}),c("input",{type:"text",maxLength:5,value:(n==="primary"?a.frequency:t.frequency).toFixed(1),onChange:v})]}),g("span",{className:C.meta,children:[g("div",{children:[c(Oe,{}),n==="primary"?a.volume:t.volume,"%"]}),g("div",{children:[c(Pe,{}),h(n==="primary"?a.ear:t.ear)]})]})]})})},Ie="https://soz-talk";function w(e,n={},a){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Ie}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(_=>{_.ok&&_.json().then(t=>{t==="ok"&&a()})}).catch(_=>console.error(_))}const N=e=>{const[n,a]=$(!1),[_,t]=$(!1),[o,v]=$("primary"),[h,r]=$({frequency:0,volume:100,ear:q.Both}),[l,d]=$({frequency:0,volume:100,ear:q.Both}),P=e.type==="radio"?Y:Z,s=e.type==="radio"?ue:Re,z=p(()=>{w(`/${e.type}/enable`,{state:!_},()=>{t(i=>!i)})},[_,t]),A=p(i=>{v(i)},[v]),I=p(()=>{const i=o==="primary"?h.ear:l.ear;let u=q[i+1]!==void 0?i+1:0;w(`/${e.type}/change_ear`,{[o]:u},()=>{o==="primary"?r(m=>f(y({},m),{ear:u})):d(m=>f(y({},m),{ear:u}))})},[o,h,l,r,d]),k=p(i=>{i>=0&&i<=100&&w(`/${e.type}/change_volume`,{[o]:i},()=>{o==="primary"?r(u=>f(y({},u),{volume:i})):d(u=>f(y({},u),{volume:i}))})},[o,r,d]),V=p(()=>{const i=(o==="primary"?h.frequency:l.frequency)*10;i>=1e3&&i<=9999&&w(`/${e.type}/change_frequency`,{[o]:i},()=>{})},[o,h,l]),E=p(()=>{w(`/${e.type}/toggle`,{state:!1},()=>{a(!1)})},[a]),B=p(i=>{const{type:u,action:m,frequency:b,volume:L,isPrimary:R,isEnabled:S}=i.data;u===e.type&&(m==="open"?a(!0):m==="close"?a(!1):m==="enabled"?S!==void 0&&t(S):m==="frequency_change"?b&&(R?r(x=>f(y({},x),{frequency:b/10})):d(x=>f(y({},x),{frequency:b/10}))):m==="volume_change"&&L&&(R?r(x=>f(y({},x),{volume:L})):d(x=>f(y({},x),{volume:L}))))},[]);return U(()=>(window.addEventListener("message",B),()=>{window.removeEventListener("message",B)}),[]),g("div",{class:`${s.container} ${n?s.container_show:s.container_hide}`,children:[c("img",{class:s.radio,src:P,alt:"Radio"}),c("div",{class:s.screen,children:c(ze,{enabled:_,currentFrequency:o,primaryFrequency:h,setPrimaryFrequency:r,secondaryFrequency:l,setSecondaryFrequency:d})}),g("div",{class:s.actions,children:[c("div",{class:s.action_enable,onClick:z}),c("div",{class:s.action_close,onClick:E,children:"x"}),c("div",{class:s.action_validate,onClick:V}),c("div",{class:s.action_mix,onClick:I}),c("div",{class:s.action_volume_up,onClick:()=>k(o==="primary"?h.volume+10:l.volume+10)}),c("div",{class:s.action_volume_down,onClick:()=>k(o==="primary"?h.volume-10:l.volume-10)}),c("div",{class:s.action_freq_primary,onClick:()=>A("primary")}),c("div",{class:s.action_freq_secondary,onClick:()=>A("secondary")})]})]})},Ve=()=>g(O,{children:[c(N,{type:"radio"}),c(N,{type:"cibi"})]});W(c(Ve,{}),document.getElementById("app"));
