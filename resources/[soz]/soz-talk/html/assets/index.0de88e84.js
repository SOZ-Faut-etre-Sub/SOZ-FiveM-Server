var S=Object.defineProperty,M=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var B=(t,n,o)=>n in t?S(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,y=(t,n)=>{for(var o in n||(n={}))O.call(n,o)&&B(t,o,n[o]);if(A)for(var o of A(n))z.call(n,o)&&B(t,o,n[o]);return t},h=(t,n)=>M(t,N(n));import{j as I,F as P,a as V,A as m,l as C,y as F,S as H}from"./vendor.33e6ab9e.js";const T=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&c(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}};T();var D="/html/assets/radio-sr.3c80ed87.png";const J="_container_1grot_1",K="_container_show_1grot_8",G="_container_hide_1grot_12",Q="_radio_1grot_16",U="_screen_1grot_22",W="_actions_1grot_32",X="_action_style_1grot_36",Y="_action_enable_1grot_47 _action_style_1grot_36",Z="_action_validate_1grot_55 _action_style_1grot_36",ee="_action_mix_1grot_63 _action_style_1grot_36",ne="_action_volume_up_1grot_72 _action_style_1grot_36",te="_action_volume_down_1grot_80 _action_style_1grot_36",oe="_action_freq_primary_1grot_89 _action_style_1grot_36",ae="_action_freq_secondary_1grot_97 _action_style_1grot_36";var l={container:J,container_show:K,container_hide:G,radio:Q,screen:U,actions:W,action_style:X,action_enable:Y,action_validate:Z,action_mix:ee,action_volume_up:ne,action_volume_down:te,action_freq_primary:oe,action_freq_secondary:ae},v=(t=>(t[t.Left=0]="Left",t[t.Both=1]="Both",t[t.Right=2]="Right",t))(v||{});const re="_screen_10e37_1",ie="_enabled_10e37_10",ce="_frequency_10e37_14",se="_meta_10e37_37";var x={screen:re,enabled:ie,frequency:ce,meta:se};const a=I,g=V,R=P,le=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),_e=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:a("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),de=({enabled:t,currentFrequency:n,primaryFrequency:o,setPrimaryFrequency:c,secondaryFrequency:e,setSecondaryFrequency:i})=>{const s=m(_=>{let d=n==="primary"?o.frequency:e.frequency;/^[0-9]{3}\.[0-9]$/.test(_.target.value)&&(d=parseFloat(_.target.value)),n==="primary"?c(w=>h(y({},w),{frequency:d})):i(w=>h(y({},w),{frequency:d}))},[n,c,i]),u=_=>{switch(_){case v.Left:return"L";case v.Both:return"L/R";case v.Right:return"R"}};return a("div",{class:`${x.screen} ${t?x.enabled:""}`,children:t&&g(R,{children:[g("div",{className:x.frequency,children:[a("span",{children:n==="primary"?"F1":"F2"}),a("input",{type:"text",maxLength:5,value:(n==="primary"?o.frequency:e.frequency).toFixed(1),onChange:s})]}),g("span",{className:x.meta,children:[g("div",{children:[a(le,{}),n==="primary"?o.volume:e.volume,"%"]}),g("div",{children:[a(_e,{}),u(n==="primary"?o.ear:e.ear)]})]})]})})},fe="https://soz-talk";function q(t,n={},o){t.charAt(0)!=="/"&&(t=`/${t}`),fetch(`${fe}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(c=>{c.ok&&c.json().then(e=>{e==="ok"&&o()})}).catch(c=>console.error(c))}const ue=()=>{const[t,n]=C(!1),[o,c]=C(!1),[e,i]=C("primary"),[s,u]=C({frequency:0,volume:100,ear:v.Both}),[_,d]=C({frequency:0,volume:100,ear:v.Both}),w=m(()=>{q("/radio/enable",{state:!o},()=>{c(r=>!r)})},[o,c]),L=m(r=>{i(r)},[i]),j=m(()=>{const r=e==="primary"?s.ear:_.ear;let f=v[r+1]!==void 0?r+1:0;q("/radio/change_ear",{[e]:f},()=>{e==="primary"?u(p=>h(y({},p),{ear:f})):d(p=>h(y({},p),{ear:f}))})},[e,s,_,u,d]),b=m(r=>{r>=0&&r<=100&&q("/radio/change_volume",{[e]:r},()=>{e==="primary"?u(f=>h(y({},f),{volume:r})):d(f=>h(y({},f),{volume:r}))})},[e,u,d]),E=m(()=>{const r=(e==="primary"?s.frequency:_.frequency)*10;r>=1e3&&r<=9999&&q("/radio/change_frequency",{[e]:r},()=>{})},[e,s,_]),$=m(r=>{const{type:f,action:p}=r.data;f==="radio"&&(p==="open"?n(!0):p==="close"&&n(!1))},[]),k=m(r=>{r.key==="Escape"&&q("/radio/toggle",{state:!1},()=>{n(!1)})},[]);return F(()=>(window.addEventListener("message",$),window.addEventListener("keydown",k),()=>{window.removeEventListener("message",$),window.removeEventListener("keydown",k)}),[]),g("div",{class:`${l.container} ${t?l.container_show:l.container_hide}`,children:[a("img",{class:l.radio,src:D,alt:"Radio"}),a("div",{class:l.screen,children:a(de,{enabled:o,currentFrequency:e,primaryFrequency:s,setPrimaryFrequency:u,secondaryFrequency:_,setSecondaryFrequency:d})}),g("div",{class:l.actions,children:[a("div",{class:l.action_enable,onClick:w}),a("div",{class:l.action_validate,onClick:E}),a("div",{class:l.action_mix,onClick:j}),a("div",{class:l.action_volume_up,onClick:()=>b(e==="primary"?s.volume+10:_.volume+10)}),a("div",{class:l.action_volume_down,onClick:()=>b(e==="primary"?s.volume-10:_.volume-10)}),a("div",{class:l.action_freq_primary,onClick:()=>L("primary")}),a("div",{class:l.action_freq_secondary,onClick:()=>L("secondary")})]})]})},me=()=>a(R,{children:a(ue,{})});H(a(me,{}),document.getElementById("app"));
