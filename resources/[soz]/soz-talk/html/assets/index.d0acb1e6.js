var F=Object.defineProperty,N=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var L=(o,n,t)=>n in o?F(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t,y=(o,n)=>{for(var t in n||(n={}))S.call(n,t)&&L(o,t,n[t]);if(A)for(var t of A(n))P.call(n,t)&&L(o,t,n[t]);return o},m=(o,n)=>N(o,O(n));import{j as z,F as I,a as M,A as u,l as p,y as R,S as V}from"./vendor.33e6ab9e.js";const B=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerpolicy&&(c.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?c.credentials="include":e.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(e){if(e.ep)return;e.ep=!0;const c=t(e);fetch(e.href,c)}};B();var T="/html/assets/radio-sr.3c80ed87.png";const H="_container_dkvqt_1",D="_container_show_dkvqt_15",J="_container_hide_dkvqt_23",K="_radio_dkvqt_31",G="_screen_dkvqt_43",Q="_actions_dkvqt_63",U="_action_style_dkvqt_71",W="_action_enable_dkvqt_93 _action_style_dkvqt_71",X="_action_validate_dkvqt_109 _action_style_dkvqt_71",Y="_action_volume_up_dkvqt_127 _action_style_dkvqt_71",Z="_action_volume_down_dkvqt_143 _action_style_dkvqt_71",ee="_action_freq_primary_dkvqt_161 _action_style_dkvqt_71",ne="_action_freq_secondary_dkvqt_177 _action_style_dkvqt_71";var s={container:H,container_show:D,container_hide:J,radio:K,screen:G,actions:Q,action_style:U,action_enable:W,action_validate:X,action_volume_up:Y,action_volume_down:Z,action_freq_primary:ee,action_freq_secondary:ne};const te="_screen_1r55y_1",oe="_enabled_1r55y_19",ae="_frequency_1r55y_27",ce="_volume_1r55y_73";var q={screen:te,enabled:oe,frequency:ae,volume:ce};const a=z,h=M,x=I,ie=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),re=({enabled:o,currentFrequency:n,primaryFrequency:t,setPrimaryFrequency:r,secondaryFrequency:e,setSecondaryFrequency:c})=>{const l=u(f=>{let _=n==="primary"?t.frequency:e.frequency;/^[0-9]{3}\.[0-9]$/.test(f.target.value)&&(_=parseFloat(f.target.value)),n==="primary"?r(d=>m(y({},d),{frequency:_})):c(d=>m(y({},d),{frequency:_}))},[n,r,c]);return a("div",{class:`${q.screen} ${o?q.enabled:""}`,children:o&&h(x,{children:[h("div",{className:q.frequency,children:[a("span",{children:n==="primary"?"F1":"F2"}),a("input",{type:"text",maxLength:5,value:(n==="primary"?t.frequency:e.frequency).toFixed(1),onChange:l})]}),h("span",{className:q.volume,children:[a(ie,{}),n==="primary"?t.volume:e.volume,"%"]})]})})},se="https://soz-talk";function g(o,n={},t){o.charAt(0)!=="/"&&(o=`/${o}`),fetch(`${se}${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(r=>{r.ok&&r.json().then(e=>{e==="ok"&&t()})}).catch(r=>console.error(r))}const le=()=>{const[o,n]=p(!1),[t,r]=p(!1),[e,c]=p("primary"),[l,f]=p({frequency:0,volume:100}),[_,d]=p({frequency:0,volume:100}),E=u(()=>{g("/radio/enable",{state:!t},()=>{r(i=>!i)})},[t,r]),k=u(i=>{c(i)},[c]),w=u(i=>{i>=0&&i<=100&&g("/radio/change_volume",{[e]:i},()=>{e==="primary"?f(v=>m(y({},v),{volume:i})):d(v=>m(y({},v),{volume:i}))})},[e,f,d]),j=u(()=>{const i=(e==="primary"?l.frequency:_.frequency)*10;i>=1e3&&i<=9999&&g("/radio/change_frequency",{[e]:i},()=>{})},[e,l,_]),b=u(i=>{const{type:v,action:$}=i.data;v==="radio"&&($==="open"?n(!0):$==="close"&&n(!1))},[]),C=u(i=>{i.key==="Escape"&&g("/radio/toggle",{state:!1},()=>{n(!1)})},[]);return R(()=>(window.addEventListener("message",b),window.addEventListener("keydown",C),()=>{window.removeEventListener("message",b),window.removeEventListener("keydown",C)}),[]),h("div",{class:`${s.container} ${o?s.container_show:s.container_hide}`,children:[a("img",{class:s.radio,src:T,alt:"Radio"}),a("div",{class:s.screen,children:a(re,{enabled:t,currentFrequency:e,primaryFrequency:l,setPrimaryFrequency:f,secondaryFrequency:_,setSecondaryFrequency:d})}),h("div",{class:s.actions,children:[a("div",{class:s.action_enable,onClick:E}),a("div",{class:s.action_validate,onClick:j}),a("div",{class:s.action_volume_up,onClick:()=>w(e==="primary"?l.volume+10:_.volume+10)}),a("div",{class:s.action_volume_down,onClick:()=>w(e==="primary"?l.volume-10:_.volume-10)}),a("div",{class:s.action_freq_primary,onClick:()=>k("primary")}),a("div",{class:s.action_freq_secondary,onClick:()=>k("secondary")})]})]})},_e=()=>a(x,{children:a(le,{})});V(a(_e,{}),document.getElementById("app"));
