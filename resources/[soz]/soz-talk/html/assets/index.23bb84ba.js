var F=Object.defineProperty,N=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var j=(t,n,o)=>n in t?F(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,m=(t,n)=>{for(var o in n||(n={}))S.call(n,o)&&j(t,o,n[o]);if(A)for(var o of A(n))P.call(n,o)&&j(t,o,n[o]);return t},v=(t,n)=>N(t,O(n));import{j as z,F as I,a as M,A as f,l as g,y as R,S as V}from"./vendor.5aab0455.js";const B=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const c of e)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(e){const c={};return e.integrity&&(c.integrity=e.integrity),e.referrerpolicy&&(c.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?c.credentials="include":e.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(e){if(e.ep)return;e.ep=!0;const c=o(e);fetch(e.href,c)}};B();var T="/html/assets/radio-sr.3c80ed87.png";const H="_container_wgf9y_1",D="_container_show_wgf9y_8",J="_container_hide_wgf9y_12",K="_radio_wgf9y_16",G="_screen_wgf9y_22",Q="_actions_wgf9y_32",U="_action_style_wgf9y_36",W="_action_enable_wgf9y_47 _action_style_wgf9y_36",X="_action_validate_wgf9y_55 _action_style_wgf9y_36",Y="_action_volume_up_wgf9y_64 _action_style_wgf9y_36",Z="_action_volume_down_wgf9y_72 _action_style_wgf9y_36",ee="_action_freq_primary_wgf9y_81 _action_style_wgf9y_36",ne="_action_freq_secondary_wgf9y_89 _action_style_wgf9y_36";var s={container:H,container_show:D,container_hide:J,radio:K,screen:G,actions:Q,action_style:U,action_enable:W,action_validate:X,action_volume_up:Y,action_volume_down:Z,action_freq_primary:ee,action_freq_secondary:ne};const oe="_screen_1av5j_1",te="_enabled_1av5j_10",ae="_frequency_1av5j_14",ce="_volume_1av5j_37";var h={screen:oe,enabled:te,frequency:ae,volume:ce};const a=z,p=M,L=I,ie=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),re=({enabled:t,currentFrequency:n,primaryFrequency:o,setPrimaryFrequency:i,secondaryFrequency:e,setSecondaryFrequency:c})=>{const l=f(y=>{let _=n==="primary"?o.frequency:e.frequency;/^[0-9]{3}\.[0-9]$/.test(y.target.value)&&(_=parseFloat(y.target.value)),n==="primary"?i(d=>v(m({},d),{frequency:_})):c(d=>v(m({},d),{frequency:_}))},[n,i,c]);return a("div",{class:`${h.screen} ${t?h.enabled:""}`,children:t&&p(L,{children:[p("div",{className:h.frequency,children:[a("span",{children:n==="primary"?"F1":"F2"}),a("input",{type:"text",maxLength:5,value:(n==="primary"?o.frequency:e.frequency).toFixed(1),onChange:l})]}),p("span",{className:h.volume,children:[a(ie,{}),n==="primary"?o.volume:e.volume,"%"]})]})})},se="https://soz-talk";function w(t,n={},o){t.charAt(0)!=="/"&&(t=`/${t}`),fetch(`${se}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(i=>{i.ok&&i.json().then(e=>{e==="ok"&&o()})}).catch(i=>console.error(i))}const le=()=>{const[t,n]=g(!1),[o,i]=g(!1),[e,c]=g("primary"),[l,y]=g({frequency:0,volume:100}),[_,d]=g({frequency:0,volume:100}),x=f(()=>{w("/radio/enable",{state:!o},()=>{i(r=>!r)})},[o,i]),q=f(r=>{c(r)},[c]),b=f(r=>{r>=0&&r<=100&&w("/radio/change_volume",{[e]:r},()=>{e==="primary"?y(u=>v(m({},u),{volume:r})):d(u=>v(m({},u),{volume:r}))})},[e,y,d]),E=f(()=>{w("/radio/change_frequency",{[e]:(e==="primary"?l.frequency:_.frequency)*10},()=>{})},[e,l,_]),C=f(r=>{const{type:u,action:k}=r.data;u==="radio"&&(k==="open"?n(!0):k==="close"&&n(!1))},[]),$=f(r=>{r.key==="Escape"&&w("/radio/toggle",{state:!1},()=>{n(!1)})},[]);return R(()=>(window.addEventListener("message",C),window.addEventListener("keydown",$),()=>{window.removeEventListener("message",C),window.removeEventListener("keydown",$)}),[]),p("div",{class:`${s.container} ${t?s.container_show:s.container_hide}`,children:[a("img",{class:s.radio,src:T,alt:"Radio"}),a("div",{class:s.screen,children:a(re,{enabled:o,currentFrequency:e,primaryFrequency:l,setPrimaryFrequency:y,secondaryFrequency:_,setSecondaryFrequency:d})}),p("div",{class:s.actions,children:[a("div",{class:s.action_enable,onClick:x}),a("div",{class:s.action_validate,onClick:E}),a("div",{class:s.action_volume_up,onClick:()=>b(e==="primary"?l.volume+10:_.volume+10)}),a("div",{class:s.action_volume_down,onClick:()=>b(e==="primary"?l.volume-10:_.volume-10)}),a("div",{class:s.action_freq_primary,onClick:()=>q("primary")}),a("div",{class:s.action_freq_secondary,onClick:()=>q("secondary")})]})]})},_e=()=>a(L,{children:a(le,{})});V(a(_e,{}),document.getElementById("app"));
