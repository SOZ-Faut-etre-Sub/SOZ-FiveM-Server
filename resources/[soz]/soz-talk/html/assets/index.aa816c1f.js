var F=Object.defineProperty,H=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var j=(e,n,a)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,f=(e,n)=>{for(var a in n||(n={}))D.call(n,a)&&j(e,a,n[a]);if(E)for(var a of E(n))J.call(n,a)&&j(e,a,n[a]);return e},y=(e,n)=>H(e,T(n));import{j as K,a as G,F as Q,A as v,l as q,y as U,S as W}from"./vendor.33e6ab9e.js";const X=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))_(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const h of t.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&_(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function _(o){if(o.ep)return;o.ep=!0;const t=a(o);fetch(o.href,t)}};X();var Y="/html/assets/radio-sr.3c80ed87.png",Z="/html/assets/radio-lr.9f17f379.png";const ee="_container_we8kz_1",ne="_container_show_we8kz_8",te="_container_hide_we8kz_12",oe="_radio_we8kz_16",ae="_screen_we8kz_22",ie="_actions_we8kz_32",ce="_action_style_we8kz_36",_e="_action_enable_we8kz_47 _action_style_we8kz_36",re="_action_validate_we8kz_55 _action_style_we8kz_36",se="_action_mix_we8kz_63 _action_style_we8kz_36",le="_action_volume_up_we8kz_72 _action_style_we8kz_36",de="_action_volume_down_we8kz_80 _action_style_we8kz_36",fe="_action_freq_primary_we8kz_89 _action_style_we8kz_36",ye="_action_freq_secondary_we8kz_97 _action_style_we8kz_36";var ue={container:ee,container_show:ne,container_hide:te,radio:oe,screen:ae,actions:ie,action_style:ce,action_enable:_e,action_validate:re,action_mix:se,action_volume_up:le,action_volume_down:de,action_freq_primary:fe,action_freq_secondary:ye};const me="_container_17p6l_1",pe="_container_show_17p6l_8",he="_container_hide_17p6l_12",ve="_radio_17p6l_16",we="_screen_17p6l_22",ge="_actions_17p6l_38",ke="_action_style_17p6l_42",qe="_action_enable_17p6l_53 _action_style_17p6l_42",$e="_action_validate_17p6l_61 _action_style_17p6l_42",ze="_action_volume_up_17p6l_70 _action_style_17p6l_42",Ce="_action_volume_down_17p6l_78 _action_style_17p6l_42",be="_action_freq_primary_17p6l_87 _action_style_17p6l_42",xe="_action_freq_secondary_17p6l_95 _action_style_17p6l_42";var Le={container:me,container_show:pe,container_hide:he,radio:ve,screen:we,actions:ge,action_style:ke,action_enable:qe,action_validate:$e,action_volume_up:ze,action_volume_down:Ce,action_freq_primary:be,action_freq_secondary:xe},k=(e=>(e[e.Left=0]="Left",e[e.Both=1]="Both",e[e.Right=2]="Right",e))(k||{});const Ae="_screen_1xhmt_1",Be="_enabled_1xhmt_10",Re="_frequency_1xhmt_14",Se="_meta_1xhmt_37";var z={screen:Ae,enabled:Be,frequency:Re,meta:Se};const i=K,w=G,N=Q,Ee=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i("path",{"fill-rule":"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z","clip-rule":"evenodd"})}),je=()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",children:i("path",{d:"M512 287.9l-.0042 112C511.1 444.1 476.1 480 432 480c-26.47 0-48-21.56-48-48.06V304.1C384 277.6 405.5 256 432 256c10.83 0 20.91 2.723 30.3 6.678C449.7 159.1 362.1 80.13 256 80.13S62.29 159.1 49.7 262.7C59.09 258.7 69.17 256 80 256C106.5 256 128 277.6 128 304.1v127.9C128 458.4 106.5 480 80 480c-44.11 0-79.1-35.88-79.1-80.06L0 288c0-141.2 114.8-256 256-256c140.9 0 255.6 114.5 255.1 255.3C511.1 287.5 511.1 287.7 512 287.9z"})}),Me=({enabled:e,currentFrequency:n,primaryFrequency:a,setPrimaryFrequency:_,secondaryFrequency:o,setSecondaryFrequency:t})=>{const h=v(s=>{let l=n==="primary"?a.frequency:o.frequency;/^[0-9]{3}\.[0-9]$/.test(s.target.value)&&(l=parseFloat(s.target.value)),n==="primary"?_(d=>y(f({},d),{frequency:l})):t(d=>y(f({},d),{frequency:l}))},[n,_,t]),u=s=>{switch(s){case k.Left:return"L";case k.Both:return"L/R";case k.Right:return"R"}};return i("div",{class:`${z.screen} ${e?z.enabled:""}`,children:e&&w(N,{children:[w("div",{className:z.frequency,children:[i("span",{children:n==="primary"?"F1":"F2"}),i("input",{type:"text",maxLength:5,value:(n==="primary"?a.frequency:o.frequency).toFixed(1),onChange:h})]}),w("span",{className:z.meta,children:[w("div",{children:[i(Ee,{}),n==="primary"?a.volume:o.volume,"%"]}),w("div",{children:[i(je,{}),u(n==="primary"?a.ear:o.ear)]})]})]})})},Ne="https://soz-talk";function $(e,n={},a){e.charAt(0)!=="/"&&(e=`/${e}`),fetch(`${Ne}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(_=>{_.ok&&_.json().then(o=>{o==="ok"&&a()})}).catch(_=>console.error(_))}const M=e=>{const[n,a]=q(!1),[_,o]=q(!1),[t,h]=q("primary"),[u,s]=q({frequency:0,volume:100,ear:k.Both}),[l,d]=q({frequency:0,volume:100,ear:k.Both}),O=e.type==="radio"?Y:Z,r=e.type==="radio"?ue:Le,P=v(()=>{$(`/${e.type}/enable`,{state:!_},()=>{o(c=>!c)})},[_,o]),x=v(c=>{h(c)},[h]),I=v(()=>{const c=t==="primary"?u.ear:l.ear;let m=k[c+1]!==void 0?c+1:0;$(`/${e.type}/change_ear`,{[t]:m},()=>{t==="primary"?s(p=>y(f({},p),{ear:m})):d(p=>y(f({},p),{ear:m}))})},[t,u,l,s,d]),L=v(c=>{c>=0&&c<=100&&$(`/${e.type}/change_volume`,{[t]:c},()=>{t==="primary"?s(m=>y(f({},m),{volume:c})):d(m=>y(f({},m),{volume:c}))})},[t,s,d]),V=v(()=>{const c=(t==="primary"?u.frequency:l.frequency)*10;c>=1e3&&c<=9999&&$(`/${e.type}/change_frequency`,{[t]:c},()=>{})},[t,u,l]),A=v(c=>{const{type:m,action:p,frequency:C,volume:b,isPrimary:R,isEnabled:S}=c.data;m===e.type&&(p==="open"?a(!0):p==="close"?a(!1):p==="enabled"?S!==void 0&&o(S):p==="frequency_change"?C&&(R?s(g=>y(f({},g),{frequency:C/10})):d(g=>y(f({},g),{frequency:C/10}))):p==="volume_change"&&b&&(R?s(g=>y(f({},g),{volume:b})):d(g=>y(f({},g),{volume:b}))))},[]),B=v(c=>{c.key==="Escape"&&$(`/${e.type}/toggle`,{state:!1},()=>{a(!1)})},[]);return U(()=>(window.addEventListener("message",A),window.addEventListener("keydown",B),()=>{window.removeEventListener("message",A),window.removeEventListener("keydown",B)}),[]),w("div",{class:`${r.container} ${n?r.container_show:r.container_hide}`,children:[i("img",{class:r.radio,src:O,alt:"Radio"}),i("div",{class:r.screen,children:i(Me,{enabled:_,currentFrequency:t,primaryFrequency:u,setPrimaryFrequency:s,secondaryFrequency:l,setSecondaryFrequency:d})}),w("div",{class:r.actions,children:[i("div",{class:r.action_enable,onClick:P}),i("div",{class:r.action_validate,onClick:V}),i("div",{class:r.action_mix,onClick:I}),i("div",{class:r.action_volume_up,onClick:()=>L(t==="primary"?u.volume+10:l.volume+10)}),i("div",{class:r.action_volume_down,onClick:()=>L(t==="primary"?u.volume-10:l.volume-10)}),i("div",{class:r.action_freq_primary,onClick:()=>x("primary")}),i("div",{class:r.action_freq_secondary,onClick:()=>x("secondary")})]})]})},Oe=()=>w(N,{children:[i(M,{type:"radio"}),i(M,{type:"cibi"})]});W(i(Oe,{}),document.getElementById("app"));
